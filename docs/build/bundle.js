var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function l(){return f(" ")}function p(){return f("")}function d(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t){return Array.from(t.childNodes)}function g(t,e,n,r){for(let r=0;r<t.length;r+=1){const i=t[r];if(i.nodeName===e){let e=0;const o=[];for(;e<i.attributes.length;){const t=i.attributes[e++];n[t.name]||o.push(t.name)}for(let t=0;t<o.length;t++)i.removeAttribute(o[t]);return t.splice(r,1)[0]}}return r?function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}(e):h(e)}function m(t,e){for(let n=0;n<t.length;n+=1){const r=t[n];if(3===r.nodeType)return r.data=""+e,t.splice(n,1)[0]}return f(e)}function b(t){return m(t," ")}function w(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e,n){t.classList[n?"add":"remove"](e)}let I;function _(t){I=t}function T(){if(!I)throw new Error("Function called outside component initialization");return I}function N(){const t=T();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach(e=>{e.call(t,i)})}}}const A=[],S=[],x=[],D=[],O=Promise.resolve();let k=!1;function C(t){x.push(t)}let P=!1;const L=new Set;function R(){if(!P){P=!0;do{for(let t=0;t<A.length;t+=1){const e=A[t];_(e),M(e.$$)}for(_(null),A.length=0;S.length;)S.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];L.has(e)||(L.add(e),e())}x.length=0}while(A.length);for(;D.length;)D.pop()();k=!1,P=!1,L.clear()}}function M(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const V=new Set;let U;function j(){U={r:0,c:[],p:U}}function F(){U.r||i(U.c),U=U.p}function q(t,e){t&&t.i&&(V.delete(t),t.i(e))}function z(t,e,n,r){if(t&&t.o){if(V.has(t))return;V.add(t),U.c.push(()=>{V.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function H(t,e){z(t,1,1,()=>{e.delete(t.key)})}function B(t){t&&t.c()}function G(t,e){t&&t.l(e)}function K(t,e,r){const{fragment:s,on_mount:u,on_destroy:a,after_update:c}=t.$$;s&&s.m(e,r),C(()=>{const e=u.map(n).filter(o);a?a.push(...e):i(e),t.$$.on_mount=[]}),c.forEach(C)}function $(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function J(t,e){-1===t.$$.dirty[0]&&(A.push(t),k||(k=!0,O.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,n,o,s,u,a,h=[-1]){const f=I;_(e);const l=n.props||{},p=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:u,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:r(),dirty:h,skip_bound:!1};let d=!1;if(p.ctx=o?o(e,l,(t,n,...r)=>{const i=r.length?r[0]:n;return p.ctx&&u(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),d&&J(e,t)),n}):[],p.update(),d=!0,i(p.before_update),p.fragment=!!s&&s(p.ctx),n.target){if(n.hydrate){const t=y(n.target);p.fragment&&p.fragment.l(t),t.forEach(c)}else p.fragment&&p.fragment.c();n.intro&&q(e.$$.fragment),K(e,n.target,n.anchor),R()}_(f)}class X{$destroy(){$(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Y=function(t,e){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Q(t,e){function n(){this.constructor=t}Y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Z=function(){return(Z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function tt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function et(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function nt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rt(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function it(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(rt(arguments[e]));return t}function ot(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function st(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=st(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ut=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function at(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ct(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ht=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,ft.prototype.create),o}return Q(e,t),e}(Error),ft=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?lt(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new ht(i,u,r);return a},t}();function lt(t,e){return t.replace(pt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var pt=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function dt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vt(t,e){var n=new yt(t,e);return n.subscribe.bind(n)}var yt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=gt),void 0===r.error&&(r.error=gt),void 0===r.complete&&(r.complete=gt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function gt(){}var mt=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),bt="[DEFAULT]",wt=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=bt);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new ut;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Z({identifier:bt,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService(bt)}catch(t){}try{for(var r=nt(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=rt(i.value,2),s=o[0],u=o[1],a=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(a);u.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=bt),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return tt(this,void 0,void 0,(function(){var t;return et(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(it(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===bt?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:bt:t},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Et,It=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new wt(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function _t(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Tt,Nt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Tt||(Tt={}));var At,St={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},xt=Tt.INFO,Dt=((Et={})[Tt.DEBUG]="log",Et[Tt.VERBOSE]="log",Et[Tt.INFO]="info",Et[Tt.WARN]="warn",Et[Tt.ERROR]="error",Et),Ot=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Dt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,_t(["["+i+"]  "+t.name+":"],n))}},kt=function(){function t(t){this.name=t,this._logLevel=xt,this._logHandler=Ot,this._userLogHandler=null,Nt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Tt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?St[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,_t([this,Tt.DEBUG],t)),this._logHandler.apply(this,_t([this,Tt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,_t([this,Tt.VERBOSE],t)),this._logHandler.apply(this,_t([this,Tt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,_t([this,Tt.INFO],t)),this._logHandler.apply(this,_t([this,Tt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,_t([this,Tt.WARN],t)),this._logHandler.apply(this,_t([this,Tt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,_t([this,Tt.ERROR],t)),this._logHandler.apply(this,_t([this,Tt.ERROR],t))},t}();function Ct(t){Nt.forEach((function(e){e.setLogLevel(t)}))}var Pt,Lt=((At={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",At["bad-app-name"]="Illegal App name: '{$appName}",At["duplicate-app"]="Firebase App named '{$appName}' already exists",At["app-deleted"]="Firebase App named '{$appName}' already deleted",At["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",At["invalid-log-argument"]="First argument to `onLog` must be null or a function.",At),Rt=new ft("app","Firebase",Lt),Mt="@firebase/app",Vt="[DEFAULT]",Ut=((Pt={})[Mt]="fire-core",Pt["@firebase/analytics"]="fire-analytics",Pt["@firebase/auth"]="fire-auth",Pt["@firebase/database"]="fire-rtdb",Pt["@firebase/functions"]="fire-fn",Pt["@firebase/installations"]="fire-iid",Pt["@firebase/messaging"]="fire-fcm",Pt["@firebase/performance"]="fire-perf",Pt["@firebase/remote-config"]="fire-rc",Pt["@firebase/storage"]="fire-gcs",Pt["@firebase/firestore"]="fire-fst",Pt["fire-js"]="fire-js",Pt["firebase-wrapper"]="fire-js-all",Pt),jt=new kt("@firebase/app"),Ft=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=st(void 0,t),this.container=new It(e.name),this._addComponent(new mt("app",(function(){return o}),"PUBLIC"));try{for(var s=nt(this.firebase_.INTERNAL.components.values()),u=s.next();!u.done;u=s.next()){var a=u.value;this._addComponent(a)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=Vt),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Vt),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){jt.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Rt.create("app-deleted",{appName:this.name_})},t}();Ft.prototype.name&&Ft.prototype.options||Ft.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function qt(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=Vt);var s=o.name;if("string"!=typeof s||!s)throw Rt.create("bad-app-name",{appName:String(s)});if(dt(e,s))throw Rt.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Ut[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&a.push("and"),u&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void jt.warn(a.join(" "))}o(new mt(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Ct,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Rt.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=St[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Tt[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=Nt;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!dt(e,t=t||Vt))throw Rt.create("no-app",{appName:t});return e[t]}function o(o){var s,u,a=o.name;if(n.has(a))return jt.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw Rt.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&st(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}try{for(var h=nt(Object.keys(e)),f=h.next();!f.done;f=h.next()){var l=f.value;e[l]._addComponent(o)}}catch(t){s={error:t}}finally{try{f&&!f.done&&(u=h.return)&&u.call(h)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var zt=function t(){var e=qt(Ft);return e.INTERNAL=Z(Z({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){st(e,t)},createSubscribe:vt,ErrorFactory:ft,deepExtend:st}),e}(),Ht=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){jt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Bt=self.firebase.SDK_VERSION;Bt&&Bt.indexOf("LITE")>=0&&jt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Gt=zt.initializeApp;zt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ct()&&jt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Gt.apply(void 0,t)};var Kt=zt;!function(t,e){t.INTERNAL.registerComponent(new mt("platform-logger",(function(t){return new Ht(t)}),"PRIVATE")),t.registerVersion(Mt,"0.6.13",e),t.registerVersion("fire-js","")}(Kt);
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
Kt.registerVersion("firebase","8.2.1","app");
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var $t=function(t,e){return($t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Jt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Wt,Xt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Yt=Yt||{},Qt=Xt||self;function Zt(){}function te(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ee(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ne="closure_uid_"+(1e9*Math.random()>>>0),re=0;function ie(t,e,n){return t.call.apply(t.bind,arguments)}function oe(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function se(t,e,n){return(se=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ie:oe).apply(null,arguments)}function ue(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ae(){return Date.now()}function ce(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function he(){this.j=this.j,this.i=this.i}he.prototype.j=!1,he.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,ne)&&t[ne]||(t[ne]=++re)})(this)},he.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var fe=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},le=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function pe(t){return Array.prototype.concat.apply([],arguments)}function de(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ve(t){return/^[\s\xa0]*$/.test(t)}var ye,ge=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function me(t,e){return-1!=t.indexOf(e)}function be(t,e){return t<e?-1:t>e?1:0}t:{var we=Qt.navigator;if(we){var Ee=we.userAgent;if(Ee){ye=Ee;break t}}ye=""}function Ie(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function _e(t){var e={};for(var n in t)e[n]=t[n];return e}var Te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ne(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Te.length;o++)n=Te[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ae(t){return Ae[" "](t),t}Ae[" "]=Zt;var Se,xe,De=me(ye,"Opera"),Oe=me(ye,"Trident")||me(ye,"MSIE"),ke=me(ye,"Edge"),Ce=ke||Oe,Pe=me(ye,"Gecko")&&!(me(ye.toLowerCase(),"webkit")&&!me(ye,"Edge"))&&!(me(ye,"Trident")||me(ye,"MSIE"))&&!me(ye,"Edge"),Le=me(ye.toLowerCase(),"webkit")&&!me(ye,"Edge");function Re(){var t=Qt.document;return t?t.documentMode:void 0}t:{var Me="",Ve=(xe=ye,Pe?/rv:([^\);]+)(\)|;)/.exec(xe):ke?/Edge\/([\d\.]+)/.exec(xe):Oe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(xe):Le?/WebKit\/(\S+)/.exec(xe):De?/(?:Version)[ \/]?(\S+)/.exec(xe):void 0);if(Ve&&(Me=Ve?Ve[1]:""),Oe){var Ue=Re();if(null!=Ue&&Ue>parseFloat(Me)){Se=String(Ue);break t}}Se=Me}var je,Fe={};function qe(t){return function(t,e){var n=Fe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=ge(String(Se)).split("."),r=ge(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=be(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||be(0==s[2].length,0==u[2].length)||be(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(Qt.document&&Oe){var ze=Re();je=ze||(parseInt(Se,10)||void 0)}else je=void 0;var He=je,Be=!Oe||9<=Number(He),Ge=Oe&&!qe("9"),Ke=function(){if(!Qt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Qt.addEventListener("test",Zt,e),Qt.removeEventListener("test",Zt,e)}catch(t){}return t}();function $e(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Je(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Pe){t:{try{Ae(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:We[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}$e.prototype.b=function(){this.defaultPrevented=!0},ce(Je,$e);var We={2:"touch",3:"pen",4:"mouse"};Je.prototype.b=function(){Je.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ge)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Xe="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function Qe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Ye,this.Y=this.Z=!1}function Ze(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function tn(t){this.src=t,this.a={},this.b=0}function en(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=fe(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ze(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function nn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}tn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=nn(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Qe(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var rn="closure_lm_"+(1e6*Math.random()|0),on={};function sn(t,e,n,r,i){if(r&&r.once)return an(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)sn(t,e[o],n,r,i);return null}return n=yn(n),t&&t[Xe]?t.va(e,n,ee(r)?!!r.capture:!!r,i):un(t,e,n,!1,r,i)}function un(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ee(i)?!!i.capture:!!i;if(s&&!Be)return null;var u=dn(t);if(u||(t[rn]=u=new tn(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=pn,e=Be?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ke||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(fn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function an(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)an(t,e[o],n,r,i);return null}return n=yn(n),t&&t[Xe]?t.wa(e,n,ee(r)?!!r.capture:!!r,i):un(t,e,n,!0,r,i)}function cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else r=ee(r)?!!r.capture:!!r,n=yn(n),t&&t[Xe]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=nn(o=t.a[e],n,r,i))&&(Ze(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=dn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=nn(e,n,r,i)),(n=-1<t?e[t]:null)&&hn(n))}function hn(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Xe])en(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=dn(e))?(en(n,t),0==n.b&&(n.src=null,e[rn]=null)):Ze(t)}}}function fn(t){return t in on?on[t]:on[t]="on"+t}function ln(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&hn(t),n.call(r,e)}function pn(t,e){if(t.Y)return!0;if(!Be){if(!e)t:{e=["window","event"];for(var n=Qt,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ln(t,e=new Je(e,this))}return ln(t,new Je(e,this))}function dn(t){return(t=t[rn])instanceof tn?t:null}var vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(t){return"function"==typeof t?t:(t[vn]||(t[vn]=function(e){return t.handleEvent(e)}),t[vn])}function gn(){he.call(this),this.c=new tn(this),this.J=this,this.C=null}function mn(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new $e(e,t);else if(e instanceof $e)e.target=e.target||t;else{var i=e;Ne(e=new $e(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=bn(s,r,!0,e)&&i}if(i=bn(s=e.a=t,r,!0,e)&&i,i=bn(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=bn(s=e.a=n[o],r,!1,e)&&i}function bn(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&en(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}ce(gn,he),gn.prototype[Xe]=!0,(Wt=gn.prototype).addEventListener=function(t,e,n,r){sn(this,t,e,n,r)},Wt.removeEventListener=function(t,e,n,r){cn(this,t,e,n,r)},Wt.G=function(){if(gn.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ze(n[r]);delete e.a[t],e.b--}}this.C=null},Wt.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Wt.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var wn=Qt.JSON.stringify;function En(){this.b=this.a=null}var In,_n=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Nn}),(function(t){t.reset()}));function Tn(){var t=Dn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Nn(){this.next=this.b=this.a=null}function An(t){Qt.setTimeout((function(){throw t}),0)}function Sn(t,e){In||function(){var t=Qt.Promise.resolve(void 0);In=function(){t.then(On)}}(),xn||(In(),xn=!0),Dn.add(t,e)}En.prototype.add=function(t,e){var n=_n.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Nn.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Nn.prototype.reset=function(){this.next=this.b=this.a=null};var xn=!1,Dn=new En;function On(){for(var t;t=Tn();){try{t.a.call(t.b)}catch(t){An(t)}var e=_n;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}xn=!1}function kn(t,e){gn.call(this),this.b=t||1,this.a=e||Qt,this.f=se(this.Za,this),this.g=ae()}function Cn(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Pn(t,e,n){if("function"==typeof t)n&&(t=se(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=se(t.handleEvent,t)}return 2147483647<Number(e)?-1:Qt.setTimeout(t,e||0)}function Ln(t){t.a=Pn((function(){t.a=null,t.c&&(t.c=!1,Ln(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ce(kn,gn),(Wt=kn.prototype).aa=!1,Wt.M=null,Wt.Za=function(){if(this.aa){var t=ae()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),mn(this,"tick"),this.aa&&(Cn(this),this.start()))}},Wt.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=ae())},Wt.G=function(){kn.X.G.call(this),Cn(this),delete this.a};var Rn=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}$t(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ln(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Qt.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(he);function Mn(t){he.call(this),this.b=t,this.a={}}ce(Mn,he);var Vn=[];function Un(t,e,n,r){Array.isArray(n)||(n&&(Vn[0]=n.toString()),n=Vn);for(var i=0;i<n.length;i++){var o=sn(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function jn(t){Ie(t.a,(function(t,e){this.a.hasOwnProperty(e)&&hn(t)}),t),t.a={}}function Fn(){this.a=!0}function qn(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return wn(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Mn.prototype.G=function(){Mn.X.G.call(this),jn(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fn.prototype.info=function(){};var zn={},Hn=null;function Bn(){return Hn=Hn||new gn}function Gn(t){$e.call(this,zn.Fa,t)}function Kn(t){var e=Bn();mn(e,new Gn(e,t))}function $n(t,e){$e.call(this,zn.STAT_EVENT,t),this.stat=e}function Jn(t){var e=Bn();mn(e,new $n(e,t))}function Wn(t){$e.call(this,zn.Ga,t)}function Xn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Qt.setTimeout((function(){t()}),e)}zn.Fa="serverreachability",ce(Gn,$e),zn.STAT_EVENT="statevent",ce($n,$e),zn.Ga="timingevent",ce(Wn,$e);var Yn={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Qn={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Zn(){}function tr(t){var e;return(e=t.a)||(e=t.a={}),e}function er(){}Zn.prototype.a=null;var nr,rr={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ir(){$e.call(this,"d")}function or(){$e.call(this,"c")}function sr(){}function ur(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Mn(this),this.P=ar,t=Ce?125:void 0,this.R=new kn(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ce(ir,$e),ce(or,$e),ce(sr,Zn),nr=new sr;var ar=45e3,cr={},hr={};function fr(t,e,n){t.H=1,t.i=Pr(Sr(e)),t.j=n,t.I=!0,lr(t,null)}function lr(t,e){t.u=ae(),vr(t),t.l=Sr(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Kr(n.b,"t",r),t.D=0,t.a=Fi(t.g,t.g.C?e:null),0<t.O&&(t.F=new Rn(se(t.Ca,t,t.a),t.O)),Un(t.J,t.a,"readystatechange",t.Xa),e=t.B?_e(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Kn(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function pr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=dr(t,n);if(i==hr){4==e&&(t.h=4,Jn(14),r=!1),qn(t.c,t.f,null,"[Incomplete Response]");break}if(i==cr){t.h=4,Jn(15),qn(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}qn(t.c,t.f,i,null),wr(t,i)}4==e&&0==n.length&&(t.h=1,Jn(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ci(e),e.F=!0,Jn(11))):(qn(t.c,t.f,n,"[Invalid Chunked Response]"),br(t),mr(t))}function dr(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?hr:(n=Number(e.substring(n,r)),isNaN(n)?cr:(r+=1)+n>e.length?hr:(e=e.substr(r,n),t.D=r+n,e))}function vr(t){t.T=ae()+t.P,yr(t,t.P)}function yr(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Xn(se(t.Va,t),e)}function gr(t){t.o&&(Qt.clearTimeout(t.o),t.o=null)}function mr(t){0==t.g.v||t.A||Ri(t.g,t)}function br(t){gr(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Cn(t.R),jn(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function wr(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Zr(n.b,t)))if(n.I=t.N,!t.C&&Zr(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Li(n),_i(n)}ki(n),Jn(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Xn(se(n.Sa,n),6e3));if(1>=Qr(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Vi(n,11)}else if((t.C||n.a==t)&&Li(n),!ve(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(me(h,"spdy")||me(h,"quic")||me(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(ti(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,Cr(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=ae()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=ji(a,a.C?a.ga:null,a.fa),p.C){ei(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(gr(d),vr(d)),a.a=p}else Oi(a);0<n.g.length&&Ai(n)}else"stop"!=i[0]&&"close"!=i[0]||Vi(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Vi(n,7):Ii(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Kn(4)}catch(t){}}function Er(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(te(t)||"string"==typeof t)le(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(te(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(te(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ir(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ir)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function _r(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Tr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Tr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Tr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Wt=ur.prototype).setTimeout=function(t){this.P=t},Wt.Xa=function(t){t=t.target;var e=this.F;e&&3==mi(t)?e.f():this.Ca(t)},Wt.Ca=function(t){try{if(t==this.a)t:{var e=mi(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Ce&&!this.a.$())){this.A||4!=e||7==n||Kn(8==n||0>=r?3:2),gr(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ve(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,Jn(12),br(this),mr(this);break t}qn(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,wr(this,a)}this.I?(pr(this,e,o),Ce&&this.b&&3==e&&(Un(this.J,this.R,"tick",this.Wa),this.R.start())):(qn(this.c,this.f,o,null),wr(this,o)),4==e&&br(this),this.b&&!this.A&&(4==e?Ri(this.g,this):(this.b=!1,vr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Jn(12)):(this.h=0,Jn(13)),br(this),mr(this)}}}catch(t){}},Wt.Wa=function(){if(this.a){var t=mi(this.a),e=this.a.$();this.D<e.length&&(gr(this),pr(this,t,e),this.b&&4!=t&&vr(this))}},Wt.cancel=function(){this.A=!0,br(this)},Wt.Va=function(){this.o=null;var t=ae();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Kn(3),Jn(17)),br(this),this.h=2,mr(this)):yr(this,this.T-t)},(Wt=Ir.prototype).K=function(){_r(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Wt.L=function(){return _r(this),this.a.concat()},Wt.get=function(t,e){return Tr(this.b,t)?this.b[t]:e},Wt.set=function(t,e){Tr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Wt.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Nr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ar(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ar){this.a=void 0!==e?e:t.a,xr(this,t.f),this.j=t.j,Dr(this,t.c),Or(this,t.h),this.g=t.g,e=t.b;var n=new zr;n.c=e.c,e.a&&(n.a=new Ir(e.a),n.b=e.b),kr(this,n),this.i=t.i}else t&&(n=String(t).match(Nr))?(this.a=!!e,xr(this,n[1]||"",!0),this.j=Lr(n[2]||""),Dr(this,n[3]||"",!0),Or(this,n[4]),this.g=Lr(n[5]||"",!0),kr(this,n[6]||"",!0),this.i=Lr(n[7]||"")):(this.a=!!e,this.b=new zr(null,this.a))}function Sr(t){return new Ar(t)}function xr(t,e,n){t.f=n?Lr(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Dr(t,e,n){t.c=n?Lr(e,!0):e}function Or(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function kr(t,e,n){e instanceof zr?(t.b=e,function(t,e){e&&!t.f&&(Hr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Br(this,e),Kr(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Rr(e,Fr)),t.b=new zr(e,t.a))}function Cr(t,e,n){t.b.set(e,n)}function Pr(t){return Cr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ae()).toString(36)),t}function Lr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Rr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Mr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Mr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ar.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Rr(e,Vr,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Rr(e,Vr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Rr(n,"/"==n.charAt(0)?jr:Ur,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Rr(n,qr)),t.join("")};var Vr=/[#\/\?@]/g,Ur=/[#\?:]/g,jr=/[#\?]/g,Fr=/[#\?@]/g,qr=/#/g;function zr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Hr(t){t.a||(t.a=new Ir,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Br(t,e){Hr(t),e=$r(t,e),Tr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Tr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&_r(t)))}function Gr(t,e){return Hr(t),e=$r(t,e),Tr(t.a.b,e)}function Kr(t,e,n){Br(t,e),0<n.length&&(t.c=null,t.a.set($r(t,e),de(n)),t.b+=n.length)}function $r(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Wt=zr.prototype).add=function(t,e){Hr(this),this.c=null,t=$r(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Wt.forEach=function(t,e){Hr(this),this.a.forEach((function(n,r){le(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Wt.L=function(){Hr(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Wt.K=function(t){Hr(this);var e=[];if("string"==typeof t)Gr(this,t)&&(e=pe(e,this.a.get($r(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=pe(e,t[n])}return e},Wt.set=function(t,e){return Hr(this),this.c=null,Gr(this,t=$r(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Wt.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Wt.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Jr=function(t,e){this.b=t,this.a=e};function Wr(t){this.g=t||Xr,Qt.PerformanceNavigationTiming?t=0<(t=Qt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Qt.ia&&Qt.ia.ya&&Qt.ia.ya()&&Qt.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Xr=10;function Yr(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Qr(t){return t.b?1:t.a?t.a.size:0}function Zr(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ti(t,e){t.a?t.a.add(e):t.b=e}function ei(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ni(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Jt(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return de(t.c)}function ri(){}function ii(){this.a=new ri}function oi(t,e,n){var r=n||"";try{Er(t,(function(t,n){var i=t;ee(t)&&(i=wn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function si(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Wr.prototype.cancel=function(){var t,e;if(this.c=ni(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Jt(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ri.prototype.stringify=function(t){return Qt.JSON.stringify(t,void 0)},ri.prototype.parse=function(t){return Qt.JSON.parse(t,void 0)};var ui=Qt.JSON.parse;function ai(t){gn.call(this),this.headers=new Ir,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=ci,this.D=this.F=!1}ce(ai,gn);var ci="",hi=/^https?$/i,fi=["POST","PUT"];function li(t){return"content-type"==t.toLowerCase()}function pi(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,di(t),yi(t)}function di(t){t.u||(t.u=!0,mn(t,"complete"),mn(t,"error"))}function vi(t){if(t.b&&void 0!==Yt&&(!t.s[1]||4!=mi(t)||2!=t.W()))if(t.l&&4==mi(t))Pn(t.za,0,t);else if(mn(t,"readystatechange"),4==mi(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Nr)[1]||null;if(!o&&Qt.self&&Qt.self.location){var s=Qt.self.location.protocol;o=s.substr(0,s.length-1)}i=!hi.test(o?o.toLowerCase():"")}e=i}if(e)mn(t,"complete"),mn(t,"success");else{t.h=6;try{var u=2<mi(t)?t.a.statusText:""}catch(n){u=""}t.f=u+" ["+t.W()+"]",di(t)}}finally{yi(t)}}}function yi(t,e){if(t.a){gi(t);var n=t.a,r=t.s[0]?Zt:null;t.a=null,t.s=null,e||mn(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function gi(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Qt.clearTimeout(t.m),t.m=null)}function mi(t){return t.a?t.a.readyState:0}function bi(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ie(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Cr(t,e,n))}function wi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ei(t){this.pa=0,this.g=[],this.c=new Fn,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=wi("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=wi("baseRetryDelayMs",5e3,t),this.Ra=wi("retryDelaySeedMs",1e4,t),this.Ma=wi("forwardChannelMaxRetries",2,t),this.ma=wi("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Wr(t&&t.concurrentRequestLimit),this.ka=new ii,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Ii(t){if(Ti(t),3==t.v){var e=t.R++,n=Sr(t.B);Cr(n,"SID",t.J),Cr(n,"RID",e),Cr(n,"TYPE","terminate"),xi(t,n),(e=new ur(t,t.c,e,void 0)).H=2,e.i=Pr(Sr(n)),n=!1,Qt.navigator&&Qt.navigator.sendBeacon&&(n=Qt.navigator.sendBeacon(e.i.toString(),"")),!n&&Qt.Image&&((new Image).src=e.i,n=!0),n||(e.a=Fi(e.g,null),e.a.ba(e.i)),e.u=ae(),vr(e)}Ui(t)}function _i(t){t.a&&(Ci(t),t.a.cancel(),t.a=null)}function Ti(t){_i(t),t.j&&(Qt.clearTimeout(t.j),t.j=null),Li(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Qt.clearTimeout(t.h),t.h=null)}function Ni(t,e){t.g.push(new Jr(t.Oa++,e)),3==t.v&&Ai(t)}function Ai(t){Yr(t.b)||t.h||(t.h=!0,Sn(t.Ba,t),t.u=0)}function Si(t,e){var n;n=e?e.f:t.R++;var r=Sr(t.B);Cr(r,"SID",t.J),Cr(r,"RID",n),Cr(r,"AID",t.P),xi(t,r),t.i&&t.l&&bi(r,t.i,t.l),n=new ur(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Di(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ti(t.b,n),fr(n,r,e)}function xi(t,e){t.f&&Er({},(function(t,n){Cr(e,n,t)}))}function Di(t,e,n){n=Math.min(t.g.length,n);var r=t.f?se(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{oi(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Oi(t){t.a||t.j||(t.T=1,Sn(t.Aa,t),t.o=0)}function ki(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Xn(se(t.Aa,t),Mi(t,t.o)),t.o++,!0)}function Ci(t){null!=t.s&&(Qt.clearTimeout(t.s),t.s=null)}function Pi(t){t.a=new ur(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Sr(t.la);Cr(e,"RID","rpc"),Cr(e,"SID",t.J),Cr(e,"CI",t.H?"0":"1"),Cr(e,"AID",t.P),xi(t,e),Cr(e,"TYPE","xmlhttp"),t.i&&t.l&&bi(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Pr(Sr(e)),n.j=null,n.I=!0,lr(n,t)}function Li(t){null!=t.m&&(Qt.clearTimeout(t.m),t.m=null)}function Ri(t,e){var n=null;if(t.a==e){Li(t),Ci(t),t.a=null;var r=2}else{if(!Zr(t.b,e))return;n=e.s,ei(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=ae()-e.u;var i=t.u;mn(r=Bn(),new Wn(r,n,e,i)),Ai(t)}else Oi(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Qr(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Xn(se(t.Ba,t,e),Mi(t,t.u)),t.u++,0)))}(t,e)||2==r&&ki(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Vi(t,5);break;case 4:Vi(t,10);break;case 3:Vi(t,6);break;default:Vi(t,2)}}function Mi(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Vi(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=se(t.Ya,t);n||(n=new Ar("//www.google.com/images/cleardot.gif"),Qt.location&&"http"==Qt.location.protocol||xr(n,"https"),Pr(n)),function(t,e){var n=new Fn;if(Qt.Image){var r=new Image;r.onload=ue(si,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ue(si,n,r,"TestLoadImage: error",!1,e),r.onabort=ue(si,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ue(si,n,r,"TestLoadImage: timeout",!1,e),Qt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Jn(2);t.v=0,t.f&&t.f.ra(e),Ui(t),Ti(t)}function Ui(t){t.v=0,t.I=-1,t.f&&(0==ni(t.b).length&&0==t.g.length||(t.b.c.length=0,de(t.g),t.g.length=0),t.f.qa())}function ji(t,e,n){var r=function(t){return t instanceof Ar?Sr(t):new Ar(t,void 0)}(n);if(""!=r.c)e&&Dr(r,e+"."+r.c),Or(r,r.h);else{var i=Qt.location;r=function(t,e,n,r){var i=new Ar(null,void 0);return t&&xr(i,t),e&&Dr(i,e),n&&Or(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Ie(t.V,(function(t,e){Cr(r,e,t)})),e=t.A,n=t.na,e&&n&&Cr(r,e,n),Cr(r,"VER",t.ha),xi(t,r),r}function Fi(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ai(t.Na)).F=t.C,e}function qi(){}function zi(){if(Oe&&!(10<=Number(He)))throw Error("Environmental error: no available transport.")}function Hi(t,e){gn.call(this),this.a=new Ei(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!ve(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ve(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Ki(this)}function Bi(t){ir.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Gi(){or.call(this),this.status=1}function Ki(t){this.a=t}(Wt=ai.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?tr(this.H):tr(nr),this.a.onreadystatechange=se(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void pi(this,t)}t=n||"";var i=new Ir(this.headers);r&&Er(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=li,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Qt.FormData&&t instanceof Qt.FormData,!(0<=fe(fi,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{gi(this),0<this.o&&((this.D=function(t){return Oe&&qe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=se(this.xa,this)):this.m=Pn(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){pi(this,t)}},Wt.xa=function(){void 0!==Yt&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,mn(this,"timeout"),this.abort(8))},Wt.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,mn(this,"complete"),mn(this,"abort"),yi(this))},Wt.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),yi(this,!0)),ai.X.G.call(this)},Wt.za=function(){this.j||(this.A||this.l||this.g?vi(this):this.Ua())},Wt.Ua=function(){vi(this)},Wt.W=function(){try{return 2<mi(this)?this.a.status:-1}catch(t){return-1}},Wt.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Wt.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ui(e)}},Wt.ua=function(){return this.h},Wt.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Wt=Ei.prototype).ha=8,Wt.v=1,Wt.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ur(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ne(r=_e(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Di(this,n,e),Cr(i=Sr(this.B),"RID",t),Cr(i,"CVER",22),this.A&&Cr(i,"X-HTTP-Session-Id",this.A),xi(this,i),this.i&&r&&bi(i,this.i,r),ti(this.b,n),this.Ia&&Cr(i,"TYPE","init"),this.da?(Cr(i,"$req",e),Cr(i,"SID","null"),n.U=!0,fr(n,i,null)):fr(n,i,e),this.v=2}}else 3==this.v&&(t?Si(this,t):0==this.g.length||Yr(this.b)||Si(this))},Wt.Aa=function(){if(this.j=null,Pi(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Xn(se(this.Ta,this),t)}},Wt.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Jn(10),_i(this),Pi(this))},Wt.Sa=function(){null!=this.m&&(this.m=null,_i(this),ki(this),Jn(19))},Wt.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Jn(2)):(this.c.info("Failed to ping google.com"),Jn(1))},(Wt=qi.prototype).ta=function(){},Wt.sa=function(){},Wt.ra=function(){},Wt.qa=function(){},Wt.Ja=function(){},zi.prototype.a=function(t,e){return new Hi(t,e)},ce(Hi,gn),Hi.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Jn(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=ji(t,null,t.fa),Ai(t)},Hi.prototype.close=function(){Ii(this.a)},Hi.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Ni(this.a,e)}else this.l?((e={}).__data__=wn(t),Ni(this.a,e)):Ni(this.a,t)},Hi.prototype.G=function(){this.a.f=null,delete this.f,Ii(this.a),delete this.a,Hi.X.G.call(this)},ce(Bi,ir),ce(Gi,or),ce(Ki,qi),Ki.prototype.ta=function(){mn(this.a,"a")},Ki.prototype.sa=function(t){mn(this.a,new Bi(t))},Ki.prototype.ra=function(t){mn(this.a,new Gi(t))},Ki.prototype.qa=function(){mn(this.a,"b")},zi.prototype.createWebChannel=zi.prototype.a,Hi.prototype.send=Hi.prototype.h,Hi.prototype.open=Hi.prototype.g,Hi.prototype.close=Hi.prototype.close,Yn.NO_ERROR=0,Yn.TIMEOUT=8,Yn.HTTP_ERROR=6,Qn.COMPLETE="complete",er.EventType=rr,rr.OPEN="a",rr.CLOSE="b",rr.ERROR="c",rr.MESSAGE="d",gn.prototype.listen=gn.prototype.va,ai.prototype.listenOnce=ai.prototype.wa,ai.prototype.getLastError=ai.prototype.Qa,ai.prototype.getLastErrorCode=ai.prototype.ua,ai.prototype.getStatus=ai.prototype.W,ai.prototype.getResponseJson=ai.prototype.Pa,ai.prototype.getResponseText=ai.prototype.$,ai.prototype.send=ai.prototype.ba;var $i=Yn,Ji=Qn,Wi=zn,Xi=10,Yi=11,Qi=er,Zi=ai,to=new kt("@firebase/firestore");function eo(){return to.logLevel}function no(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(to.logLevel<=Tt.DEBUG){var r=e.map(oo);to.debug.apply(to,ot(["Firestore (8.2.1): "+t],r))}}function ro(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(to.logLevel<=Tt.ERROR){var r=e.map(oo);to.error.apply(to,ot(["Firestore (8.2.1): "+t],r))}}function io(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(to.logLevel<=Tt.WARN){var r=e.map(oo);to.warn.apply(to,ot(["Firestore (8.2.1): "+t],r))}}function oo(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function so(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.1) INTERNAL ASSERTION FAILED: "+t;throw ro(e),new Error(e)}function uo(t,e){t||so()}function ao(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function co(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ho=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=co(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function fo(t,e){return t<e?-1:t>e?1:0}function lo(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function po(t){return t+"\0"}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var vo=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return fo(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();vo.h=new vo("");var yo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},go=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Q(e,t),e}(Error),mo=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(vo.fromBase64String(e))}catch(e){throw new go(yo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(vo.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),bo=function(t){this._=t};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function wo(){if("undefined"==typeof Uint8Array)throw new go(yo.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Eo(){if("undefined"==typeof atob)throw new go(yo.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.fromBase64String=function(t){return Eo(),new e(mo.fromBase64String(t))},e.fromUint8Array=function(t){return wo(),new e(mo.fromUint8Array(t))},e.prototype.toBase64=function(){return Eo(),this._.toBase64()},e.prototype.toUint8Array=function(){return wo(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(bo),_o=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},To=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),No=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */No.UNAUTHENTICATED=new No(null),No.P=new No("google-credentials-uid"),No.g=new No("first-party-uid");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ao=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},So=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(No.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),xo=function(){function t(t){var e=this;this.C=null,this.currentUser=No.UNAUTHENTICATED,this.N=!1,this.F=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.F++,e.currentUser=e.O(),e.N=!0,e.p&&e.p(e.currentUser)},this.F=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then((function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.F,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.F!==e?(no("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(uo("string"==typeof n.accessToken),new Ao(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.O=function(){var t=this.auth&&this.auth.getUid();return uo(null===t||"string"==typeof t),new No(t)},t}(),Do=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=No.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Oo=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new Do(this.k,this.M))},t.prototype.S=function(t){t(No.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),ko=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();ko.U=-1;var Co=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new go(yo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new go(yo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new go(yo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new go(yo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?fo(this.nanoseconds,t.nanoseconds):fo(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Po=function(){function t(t){this.timestamp=t}return t.W=function(e){return new t(e)},t.min=function(){return new t(new Co(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.j=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),Lo=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&so(),void 0===n?n=t.length-e:n>t.length-e&&so(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return t=void 0===t?1:t,this.Y(this.segments,this.offset+t,this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new go(yo.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.at=function(){return new e([])},e}(Lo),Mo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return Mo.test(t)},e.prototype.ot=function(){return this.rt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new go(yo.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new go(yo.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new go(yo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new go(yo.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(Lo),Uo=function(){function t(t){this.path=t}return t.ft=function(e){return new t(Ro.ct(e))},t.dt=function(e){return new t(Ro.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ro.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return Ro.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new Ro(e.slice()))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jo(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fo(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var zo=function(){function t(t){this.fields=t,t.sort(Vo.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return lo(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Ho=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Bo(t){if(uo(!!t),"string"==typeof t){var e=0,n=Ho.exec(t);if(uo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Go(t.seconds),nanos:Go(t.nanos)}}function Go(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ko(t){return"string"==typeof t?vo.fromBase64String(t):vo.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $o(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Jo(t){var e=t.mapValue.fields.__previous_value__;return $o(e)?Jo(e):e}function Wo(t){var e=Bo(t.mapValue.fields.__local_write_time__.timestampValue);return new Co(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xo(t){return null==t}function Yo(t){return 0===t&&1/t==-1/0}function Qo(t){return"number"==typeof t&&Number.isInteger(t)&&!Yo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Zo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$o(t)?4:10:so()}function ts(t,e){var n=Zo(t);if(n!==Zo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wo(t).isEqual(Wo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Bo(t.timestampValue),r=Bo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ko(t.bytesValue).isEqual(Ko(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Go(t.geoPointValue.latitude)===Go(e.geoPointValue.latitude)&&Go(t.geoPointValue.longitude)===Go(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Go(t.integerValue)===Go(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Go(t.doubleValue),r=Go(e.doubleValue);return n===r?Yo(n)===Yo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return lo(t.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(jo(n)!==jo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ts(n[i],r[i])))return!1;return!0}(t,e);default:return so()}}function es(t,e){return void 0!==(t.values||[]).find((function(t){return ts(t,e)}))}function ns(t,e){var n=Zo(t),r=Zo(e);if(n!==r)return fo(n,r);switch(n){case 0:return 0;case 1:return fo(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Go(t.integerValue||t.doubleValue),r=Go(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return rs(t.timestampValue,e.timestampValue);case 4:return rs(Wo(t),Wo(e));case 5:return fo(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ko(t),r=Ko(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=fo(n[i],r[i]);if(0!==o)return o}return fo(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=fo(Go(t.latitude),Go(e.latitude));return 0!==n?n:fo(Go(t.longitude),Go(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ns(n[i],r[i]);if(o)return o}return fo(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=fo(r[s],o[s]);if(0!==u)return u;var a=ns(n[r[s]],i[o[s]]);if(0!==a)return a}return fo(r.length,o.length)}(t.mapValue,e.mapValue);default:throw so()}}function rs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return fo(t,e);var n=Bo(t),r=Bo(e),i=fo(n.seconds,r.seconds);return 0!==i?i:fo(n.nanos,r.nanos)}function is(t){return os(t)}function os(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Bo(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ko(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Uo.dt(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=os(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+os(t.fields[o])}return e+"}"}(t.mapValue):so();var e,n}function ss(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function us(t){return!!t&&"integerValue"in t}function as(t){return!!t&&"arrayValue"in t}function cs(t){return!!t&&"nullValue"in t}function hs(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fs(t){return!!t&&"mapValue"in t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ls=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!fs(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return ts(this.proto,t.proto)},t}(),ps=function(){function t(t){void 0===t&&(t=ls.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Zo(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(Vo.at(),this.Rt);return null!=t?new ls(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=fs(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.gt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function ds(t){var e=[];return Fo(t.fields||{},(function(t,n){var r=new Vo([t]);if(fs(n)){var i=ds(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new zo(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var vs=function(t,e){this.key=t,this.version=e},ys=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Q(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(vs),gs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Q(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(vs),ms=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(vs),bs=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function ws(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new bs(t,e,n,r,i,o,s)}function Es(t){var e=ao(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.ot()+t.op.toString()+is(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.ot()+t.dir}(t)})).join(","),Xo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ls(e.startAt)),e.endAt&&(n+="|ub:",n+=Ls(e.endAt)),e.St=n}return e.St}function Is(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ms(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ts(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Us(t.startAt,e.startAt)&&Us(t.endAt,e.endAt)}function _s(t){return Uo.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ts=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Q(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new Ns(t,n,r):"array-contains"===n?new Ds(t,r):"in"===n?new Os(t,r):"not-in"===n?new ks(t,r):"array-contains-any"===n?new Cs(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new As(t,n):new Ss(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(ns(e,this.value)):null!==e&&Zo(this.value)===Zo(e)&&this.Ct(ns(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return so()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ns=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Uo.dt(r.referenceValue),i}return Q(e,t),e.prototype.matches=function(t){var e=Uo.J(t.key,this.key);return this.Ct(e)},e}(Ts),As=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=xs("in",n),r}return Q(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ts),Ss=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=xs("not-in",n),r}return Q(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ts);function xs(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Uo.dt(t.referenceValue)}))}var Ds=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Q(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return as(e)&&es(e.arrayValue,this.value)},e}(Ts),Os=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Q(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&es(this.value.arrayValue,e)},e}(Ts),ks=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Q(e,t),e.prototype.matches=function(t){if(es(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!es(this.value.arrayValue,e)},e}(Ts),Cs=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Q(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!as(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return es(e.value.arrayValue,t)}))},e}(Ts),Ps=function(t,e){this.position=t,this.before=e};function Ls(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return is(t)})).join(",")}var Rs=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ms(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Vs(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ht()?Uo.J(Uo.dt(s.referenceValue),n.key):ns(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Us(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ts(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var js=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.Ft=null,this.Ot=null,this.startAt,this.endAt};function Fs(t,e,n,r,i,o,s,u){return new js(t,e,n,r,i,o,s,u)}function qs(t){return new js(t)}function zs(t){return!Xo(t.limit)&&"F"===t.limitType}function Hs(t){return!Xo(t.limit)&&"L"===t.limitType}function Bs(t){return t.Nt.length>0?t.Nt[0].field:null}function Gs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function Ks(t){return null!==t.collectionGroup}function $s(t){var e=ao(t);if(null===e.Ft){e.Ft=[];var n=Gs(e),r=Bs(e);if(null!==n&&null===r)n.ht()||e.Ft.push(new Rs(n)),e.Ft.push(new Rs(Vo.lt(),"asc"));else{for(var i=!1,o=0,s=e.Nt;o<s.length;o++){var u=s[o];e.Ft.push(u),u.field.ht()&&(i=!0)}if(!i){var a=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ft.push(new Rs(Vo.lt(),a))}}}return e.Ft}function Js(t){var e=ao(t);if(!e.Ot)if("F"===e.limitType)e.Ot=ws(e.path,e.collectionGroup,$s(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=$s(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Rs(o.field,s))}var u=e.endAt?new Ps(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Ps(e.startAt.position,!e.startAt.before):null;e.Ot=ws(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.Ot}function Ws(t,e,n){return new js(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xs(t,e){return Is(Js(t),Js(e))&&t.limitType===e.limitType}function Ys(t){return Es(Js(t))+"|lt:"+t.limitType}function Qs(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.ot()+" "+e.op+" "+is(e.value);var e})).join(", ")+"]"),Xo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ls(t.startAt)),t.endAt&&(e+=", endAt: "+Ls(t.endAt)),"Target("+e+")"}(Js(t))+"; limitType="+t.limitType+")"}function Zs(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):Uo.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Vs(t.startAt,$s(t),e)||t.endAt&&Vs(t.endAt,$s(t),e))}(t,e)}function tu(t){return function(e,n){for(var r=!1,i=0,o=$s(t);i<o.length;i++){var s=o[i],u=eu(s,e,n);if(0!==u)return u;r=r||s.field.ht()}return 0}}function eu(t,e,n){var r=t.field.ht()?Uo.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ns(r,i):so()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return so()}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var nu=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Po.min()),void 0===o&&(o=Po.min()),void 0===s&&(s=vo.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ru(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yo(e)?"-0":e}}function iu(t){return{integerValue:""+t}}function ou(t,e){return Qo(e)?iu(e):ru(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var su=function(){this.Ut=void 0};function uu(t,e,n){return t instanceof hu?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof fu?lu(t,e):t instanceof pu?du(t,e):function(t,e){var n=cu(t,e),r=yu(n)+yu(t.Qt);return us(n)&&us(t.Qt)?iu(r):ru(t.Kt,r)}(t,e)}function au(t,e,n){return t instanceof fu?lu(t,e):t instanceof pu?du(t,e):n}function cu(t,e){return t instanceof vu?us(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var hu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e}(su),fu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Q(e,t),e}(su);function lu(t,e){for(var n=gu(e),r=function(t){n.some((function(e){return ts(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var pu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Q(e,t),e}(su);function du(t,e){for(var n=gu(e),r=function(t){n=n.filter((function(e){return!ts(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var vu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return Q(e,t),e}(su);function yu(t){return Go(t.integerValue||t.doubleValue)}function gu(t){return as(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var mu=function(t,e){this.field=t,this.transform=e},bu=function(t,e){this.version=t,this.transformResults=e},wu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Wt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"jt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Eu(t,e){return void 0!==t.updateTime?e instanceof ys&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ys}var Iu=function(){};function _u(t,e,n){return t instanceof xu?function(t,e,n){var r=t.value;if(n.transformResults){var i=ku(t.fieldTransforms,e,n.transformResults);r=Pu(t.fieldTransforms,r,i)}return new ys(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Du?function(t,e,n){if(!Eu(t.Gt,e))return new ms(t.key,n.version);var r=Ou(t,e,n.transformResults?ku(t.fieldTransforms,e,n.transformResults):[]);return new ys(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new gs(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Tu(t,e,n,r){return t instanceof xu?function(t,e,n,r){if(!Eu(t.Gt,e))return e;var i=t.value;if(t.fieldTransforms){var o=Cu(t.fieldTransforms,n,e,r);i=Pu(t.fieldTransforms,i,o)}var s=Su(e);return new ys(t.key,s,i,{bt:!0})}(t,e,r,n):t instanceof Du?function(t,e,n,r){if(!Eu(t.Gt,e))return e;var i=Su(e),o=Ou(t,e,Cu(t.fieldTransforms,n,e,r));return new ys(t.key,i,o,{bt:!0})}(t,e,r,n):function(t,e){return Eu(t.Gt,e)?new gs(t.key,Po.min()):e}(t,e)}function Nu(t,e){return void 0!==t.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof ys?e.field(o.field):void 0,u=cu(o.transform,s||null);null!=u&&(n=null==n?(new ps).set(o.field,u):n.set(o.field,u))}return n?n.yt():null}(t.fieldTransforms,e):null}function Au(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&lo(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof fu&&e instanceof fu||t instanceof pu&&e instanceof pu?lo(t.elements,e.elements,ts):t instanceof vu&&e instanceof vu?ts(t.Qt,e.Qt):t instanceof hu&&e instanceof hu}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function Su(t){return t instanceof ys?t.version:Po.min()}var xu=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return Q(e,t),e}(Iu),Du=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.zt=r,s.Gt=i,s.fieldTransforms=o,s.type=1,s}return Q(e,t),e}(Iu);function Ou(t,e,n){var r;return r=function(t,e){var n=new ps(e);return t.zt.fields.forEach((function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.yt()}(t,r=e instanceof ys?e.data():ls.empty()),Pu(t.fieldTransforms,r,n)}function ku(t,e,n){var r=[];uo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof ys&&(u=e.field(o.field)),r.push(au(s,u,n[i]))}return r}function Cu(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof ys&&(c=n.field(u.field)),null===c&&r instanceof ys&&(c=r.field(u.field)),i.push(uu(a,c,e))}return i}function Pu(t,e,n){for(var r=new ps(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.yt()}var Lu,Ru,Mu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return Q(e,t),e}(Iu),Vu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return Q(e,t),e}(Iu),Uu=function(t){this.count=t};function ju(t){switch(t){case yo.OK:return so();case yo.CANCELLED:case yo.UNKNOWN:case yo.DEADLINE_EXCEEDED:case yo.RESOURCE_EXHAUSTED:case yo.INTERNAL:case yo.UNAVAILABLE:case yo.UNAUTHENTICATED:return!1;case yo.INVALID_ARGUMENT:case yo.NOT_FOUND:case yo.ALREADY_EXISTS:case yo.PERMISSION_DENIED:case yo.FAILED_PRECONDITION:case yo.ABORTED:case yo.OUT_OF_RANGE:case yo.UNIMPLEMENTED:case yo.DATA_LOSS:return!0;default:return so()}}function Fu(t){if(void 0===t)return ro("GRPC error has no .code"),yo.UNKNOWN;switch(t){case Lu.OK:return yo.OK;case Lu.CANCELLED:return yo.CANCELLED;case Lu.UNKNOWN:return yo.UNKNOWN;case Lu.DEADLINE_EXCEEDED:return yo.DEADLINE_EXCEEDED;case Lu.RESOURCE_EXHAUSTED:return yo.RESOURCE_EXHAUSTED;case Lu.INTERNAL:return yo.INTERNAL;case Lu.UNAVAILABLE:return yo.UNAVAILABLE;case Lu.UNAUTHENTICATED:return yo.UNAUTHENTICATED;case Lu.INVALID_ARGUMENT:return yo.INVALID_ARGUMENT;case Lu.NOT_FOUND:return yo.NOT_FOUND;case Lu.ALREADY_EXISTS:return yo.ALREADY_EXISTS;case Lu.PERMISSION_DENIED:return yo.PERMISSION_DENIED;case Lu.FAILED_PRECONDITION:return yo.FAILED_PRECONDITION;case Lu.ABORTED:return yo.ABORTED;case Lu.OUT_OF_RANGE:return yo.OUT_OF_RANGE;case Lu.UNIMPLEMENTED:return yo.UNIMPLEMENTED;case Lu.DATA_LOSS:return yo.DATA_LOSS;default:return so()}}(Ru=Lu||(Lu={}))[Ru.OK=0]="OK",Ru[Ru.CANCELLED=1]="CANCELLED",Ru[Ru.UNKNOWN=2]="UNKNOWN",Ru[Ru.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ru[Ru.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ru[Ru.NOT_FOUND=5]="NOT_FOUND",Ru[Ru.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ru[Ru.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ru[Ru.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ru[Ru.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ru[Ru.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ru[Ru.ABORTED=10]="ABORTED",Ru[Ru.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ru[Ru.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ru[Ru.INTERNAL=13]="INTERNAL",Ru[Ru.UNAVAILABLE=14]="UNAVAILABLE",Ru[Ru.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var qu=function(){function t(t,e){this.J=t,this.root=e||Hu.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,Hu.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,Hu.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Zt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new zu(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new zu(this.root,t,this.J,!1)},t.prototype.se=function(){return new zu(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new zu(this.root,t,this.J,!0)},t}(),zu=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),Hu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw so();if(this.right._e())throw so();var t=this.left.me();if(t!==this.right.me())throw so();return t+(this._e()?0:1)},t}();Hu.EMPTY=null,Hu.RED=!0,Hu.Jt=!1,Hu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw so()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw so()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw so()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw so()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw so()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new Hu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Bu=function(){function t(t){this.J=t,this.data=new qu(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt((function(e,n){return t(e),!1}))},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new Gu(this.data.ee())},t.prototype.ne=function(t){return new Gu(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),Gu=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),Ku=new qu(Uo.J);function $u(){return Ku}function Ju(){return $u()}var Wu=new qu(Uo.J);function Xu(){return Wu}var Yu=new qu(Uo.J);var Qu=new Bu(Uo.J);function Zu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Qu,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ta=new Bu(fo);function ea(){return ta}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var na=function(){function t(t){this.J=t?function(e,n){return t(e,n)||Uo.J(e.key,n.key)}:function(t,e){return Uo.J(t.key,e.key)},this.Ve=Xu(),this.pe=new qu(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),ra=function(){function t(){this.ve=new qu(Uo.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):so():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt((function(e,n){t.push(n)})),t},t}(),ia=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=u}return t.Fe=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,na.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&Xs(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),oa=function(){function t(t,e,n,r,i){this.Mt=t,this.Oe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,sa.Be(e,n)),new t(Po.min(),r,ea(),$u(),Zu())},t}(),sa=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(vo.h,n,Zu(),Zu(),Zu())},t}(),ua=function(t,e,n,r){this.We=t,this.removedTargetIds=e,this.key=n,this.je=r},aa=function(t,e){this.targetId=t,this.Ge=e},ca=function(t,e,n,r){void 0===n&&(n=vo.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ha=function(){function t(){this.ze=0,this.He=pa(),this.Je=vo.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=Zu(),e=Zu(),n=Zu();return this.He.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:so()}})),new sa(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=pa()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),fa=function(){function t(t){this.hn=t,this.ln=new Map,this._n=$u(),this.fn=la(),this.dn=new Bu(fo)}return t.prototype.wn=function(t){for(var e=0,n=t.We;e<n.length;e++){var r=n[e];t.je instanceof ys?this.En(r,t.je):t.je instanceof gs&&this.Tn(r,t.key,t.je)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Tn(r,t.key,t.je)},t.prototype.In=function(t){var e=this;this.mn(t,(function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:so()}}))},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach((function(t,r){n.Rn(r)&&e(r)}))},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(_s(i))if(0===n){var o=new Uo(i.path);this.Tn(e,o,new gs(o,Po.min()))}else uo(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach((function(r,i){var o=e.gn(i);if(o){if(r.qe&&_s(o.target)){var s=new Uo(o.target.path);null!==e._n.get(s)||e.bn(i,s)||e.Tn(i,s,new gs(s,t))}r.tn&&(n.set(i,r.nn()),r.sn())}}));var r=Zu();this.fn.forEach((function(t,n){var i=!0;n.Re((function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new oa(t,n,this.dn,this._n,r);return this._n=$u(),this.fn=la(),this.dn=new Bu(fo),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new ha,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new Bu(fo),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||no("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new ha),this.hn.Sn(t).forEach((function(n){e.Tn(t,n,null)}))},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function la(){return new qu(Uo.J)}function pa(){return new qu(Uo.J)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var da={asc:"ASCENDING",desc:"DESCENDING"},va={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ya=function(t,e){this.T=t,this.qt=e};function ga(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function ma(t,e){return t.qt?e.toBase64():e.toUint8Array()}function ba(t,e){return ga(t,e.G())}function wa(t){return uo(!!t),Po.W(function(t){var e=Bo(t);return new Co(e.seconds,e.nanos)}(t))}function Ea(t,e){return function(t){return new Ro(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function Ia(t){var e=Ro.ct(t);return uo(Ga(e)),e}function _a(t,e){return Ea(t.T,e.path)}function Ta(t,e){var n=Ia(e);if(n.get(1)!==t.T.projectId)throw new go(yo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new go(yo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new Uo(xa(n))}function Na(t,e){return Ea(t.T,e)}function Aa(t){var e=Ia(t);return 4===e.length?Ro.at():xa(e)}function Sa(t){return new Ro(["projects",t.T.projectId,"databases",t.T.database]).ot()}function xa(t){return uo(t.length>4&&"documents"===t.get(4)),t.X(5)}function Da(t,e,n){return{name:_a(t,e),fields:n.proto.mapValue.fields}}function Oa(t,e){var n;if(e instanceof xu)n={update:Da(t,e.key,e.value)};else if(e instanceof Mu)n={delete:_a(t,e.key)};else if(e instanceof Du)n={update:Da(t,e.key,e.data),updateMask:Ba(e.zt)};else{if(!(e instanceof Vu))return so();n={verify:_a(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof hu)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof fu)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof pu)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof vu)return{fieldPath:e.field.ot(),increment:n.Qt};throw so()}(0,t)}))),e.Gt.jt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ba(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:so()}(t,e.Gt)),n}function ka(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?wu.updateTime(wa(t.updateTime)):void 0!==t.exists?wu.exists(t.exists):wu.Wt()}(e.currentDocument):wu.Wt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)uo("REQUEST_TIME"===e.setToServerValue),n=new hu;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new fu(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new pu(i)}else"increment"in e?n=new vu(t,e.increment):so();var o=Vo._t(e.fieldPath);return new mu(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ta(t,e.update.name),o=new ls({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new zo(e.map((function(t){return Vo._t(t)})))}(e.updateMask);return new Du(i,o,s,n,r)}return new xu(i,o,n,r)}if(e.delete){var u=Ta(t,e.delete);return new Mu(u,n)}if(e.verify){var a=Ta(t,e.verify);return new Vu(a,n)}return so()}function Ca(t,e){return{documents:[Na(t,e.path)]}}function Pa(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Na(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Na(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(hs(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NAN"}};if(cs(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(hs(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NAN"}};if(cs(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(t.field),op:ja(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Fa(t.field),direction:Ua(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.qt||Xo(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ma(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ma(e.endAt)),n}function La(t){var e=Aa(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){uo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ra(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new Rs(qa(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return Xo(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Va(n.startAt));var h=null;return n.endAt&&(h=Va(n.endAt)),Fs(e,i,u,s,a,"F",c,h)}function Ra(t){return t?void 0!==t.unaryFilter?[Ha(t)]:void 0!==t.fieldFilter?[za(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Ra(t)})).reduce((function(t,e){return t.concat(e)})):so():[]}function Ma(t){return{before:t.before,values:t.position}}function Va(t){var e=!!t.before,n=t.values||[];return new Ps(n,e)}function Ua(t){return da[t]}function ja(t){return va[t]}function Fa(t){return{fieldPath:t.ot()}}function qa(t){return Vo._t(t.fieldPath)}function za(t){return Ts.create(qa(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return so()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ha(t){switch(t.unaryFilter.op){case"IS_NAN":var e=qa(t.unaryFilter.field);return Ts.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=qa(t.unaryFilter.field);return Ts.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qa(t.unaryFilter.field);return Ts.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qa(t.unaryFilter.field);return Ts.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return so()}}function Ba(t){var e=[];return t.fields.forEach((function(t){return e.push(t.ot())})),{fieldPaths:e}}function Ga(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ka=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},$a=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.Fn=!1,t((function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)}),(function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Fn&&so(),this.Fn=!0,this.Nn?this.error?this.On(n,this.error):this.kn(e,this.result):new t((function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.On(n,e).next(t,i)}}))},t.prototype.Mn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.On=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),Ja=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new Ka,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new Ya(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=nc(e.target.error);n.qn.reject(new Ya(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ya(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(no("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Za(e)},t}(),Wa=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn(at())&&ro("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return no("SimpleDb","Removing database:",t),tc(window.indexedDB.deleteDatabase(t)).Mn()},t.Wn=function(){if("undefined"==typeof indexedDB)return!1;if(t.jn())return!0;var e=at(),n=t.Kn(e),r=0<n&&n<10,i=t.Gn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.jn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return tt(this,void 0,void 0,(function(){var e,n=this;return et(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(no("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ya(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new go(yo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Ya(t,n))},i.onupgradeneeded=function(t){no("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Qn.Yn(e,i.transaction,t.oldVersion,n.version).next((function(){no("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}}))}))},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return tt(this,void 0,void 0,(function(){var i,o,s,u,a;return et(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,h;return et(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,u.Jn(t)];case 2:return u.db=f.sent(),e=Ja.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),$a.reject(t)})).Mn(),a={},s.catch((function(){})),[4,e.Un];case 3:return[2,(a.value=(f.sent(),s),a)];case 4:return c=f.sent(),h="FirebaseError"!==c.name&&o<3,no("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Xa=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return tc(this.ts.delete())},t}(),Ya=function(t){function e(e,n){var r=this;return(r=t.call(this,yo.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Q(e,t),e}(go);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Qa(t){return"IndexedDbTransactionError"===t.name}var Za=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(no("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(no("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),tc(n)},t.prototype.add=function(t){return no("SimpleDb","ADD",this.store.name,t,t),tc(this.store.add(t))},t.prototype.get=function(t){var e=this;return tc(this.store.get(t)).next((function(n){return void 0===n&&(n=null),no("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return no("SimpleDb","DELETE",this.store.name,t),tc(this.store.delete(t))},t.prototype.count=function(){return no("SimpleDb","COUNT",this.store.name),tc(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.us=function(t,e){no("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,(function(t,e,n){return n.delete()}))},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new $a((function(n,r){e.onerror=function(t){var e=nc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.cs=function(t,e){var n=[];return new $a((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Xa(i),s=e(i.primaryKey,i.value,o);if(s instanceof $a){var u=s.catch((function(t){return o.done(),$a.reject(t)}));n.push(u)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}})).next((function(){return $a.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function tc(t){return new $a((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=nc(t.target.error);n(e)}}))}var ec=!1;function nc(t){var e=Wa.Kn(at());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new go("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ec||(ec=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var rc=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new Ka,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch((function(t){}))}return t.Is=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.As=setTimeout((function(){return e.Rs()}),t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new go(yo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys((function(){return null!==t.As?(t.clearTimeout(),t.op().then((function(e){return t.Ts.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function ic(t,e){if(ro("AsyncQueue",e+": "+t),Qa(t))return new go(yo.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var oc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sc=function(){function t(){this.Vs=[]}return t.prototype.ps=function(t){this.Vs.push(t)},t.prototype.bs=function(){this.Vs.forEach((function(t){return t()}))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function uc(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=cc(e)),e=ac(t.get(n),e);return cc(e)}function ac(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function cc(t){return t+""}function hc(t){var e=t.length;if(uo(e>=2),2===e)return uo(""===t.charAt(0)&&""===t.charAt(1)),Ro.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&so(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:so()}o=s+2}return new Ro(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fc=function(t,e){this.seconds=t,this.nanoseconds=e},lc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};lc.store="owner",lc.key="owner";var pc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};pc.store="mutationQueues",pc.keyPath="userId";var dc=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};dc.store="mutations",dc.keyPath="batchId",dc.userMutationsIndex="userMutationsIndex",dc.userMutationsKeyPath=["userId","batchId"];var vc=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,uc(e)]},t.key=function(t,e,n){return[t,uc(e),n]},t}();vc.store="documentMutations",vc.PLACEHOLDER=new vc;var yc=function(t,e){this.path=t,this.readTime=e},gc=function(t,e){this.path=t,this.version=e},mc=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};mc.store="remoteDocuments",mc.readTimeIndex="readTimeIndex",mc.readTimeIndexPath="readTime",mc.collectionReadTimeIndex="collectionReadTimeIndex",mc.collectionReadTimeIndexPath=["parentPath","readTime"];var bc=function(t){this.byteSize=t};bc.store="remoteDocumentGlobal",bc.key="remoteDocumentGlobalKey";var wc=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};wc.store="targets",wc.keyPath="targetId",wc.queryTargetsIndexName="queryTargetsIndex",wc.queryTargetsKeyPath=["canonicalId","targetId"];var Ec=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ec.store="targetDocuments",Ec.keyPath=["targetId","path"],Ec.documentTargetsIndex="documentTargetsIndex",Ec.documentTargetsKeyPath=["path","targetId"];var Ic=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ic.key="targetGlobalKey",Ic.store="targetGlobal";var _c=function(t,e){this.collectionId=t,this.parent=e};_c.store="collectionParents",_c.keyPath=["collectionId","parent"];var Tc=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Tc.store="clientMetadata",Tc.keyPath="clientId";var Nc=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Nc.store="bundles",Nc.keyPath="bundleId";var Ac=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ac.store="namedQueries",Ac.keyPath="name";var Sc=ot(ot(ot(ot([pc.store,dc.store,vc.store,mc.store,wc.store,lc.store,Ic.store,Ec.store],[Tc.store]),[bc.store]),[_c.store]),[Nc.store,Ac.store]),xc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).vs=e,r.Ss=n,r}return Q(e,t),e}(sc);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Dc(t,e){var n=ao(t);return Wa.Hn(n.vs,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Oc=function(){function t(t,e,n,r){this.batchId=t,this.Ds=e,this.baseMutations=n,this.mutations=r}return t.prototype.Cs=function(t,e,n){for(var r=n.xs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=_u(o,e,r[i]))}return e},t.prototype.Ns=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Tu(i,e,e,this.Ds))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=Tu(a,e,o,this.Ds))}return e},t.prototype.Fs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Ns(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Zu())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&lo(this.mutations,t.mutations,(function(t,e){return Au(t,e)}))&&lo(this.baseMutations,t.baseMutations,(function(t,e){return Au(t,e)}))},t}(),kc=function(){function t(t,e,n,r){this.batch=t,this.Os=e,this.xs=n,this.ks=r}return t.from=function(e,n,r){uo(e.mutations.length===r.length);for(var i=Yu,o=e.mutations,s=0;s<o.length;s++)i=i.Ht(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Cc=function(t){this.Ms=t};function Pc(t,e){if(e.document)return function(t,e,n){var r=Ta(t,e.name),i=wa(e.updateTime),o=new ls({mapValue:{fields:e.fields}});return new ys(r,i,o,{hasCommittedMutations:!!n})}(t.Ms,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Uo.Tt(e.noDocument.path),r=Uc(e.noDocument.readTime);return new gs(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Uo.Tt(e.unknownDocument.path);return r=Uc(e.unknownDocument.version),new ms(i,r)}return so()}function Lc(t,e,n){var r=Rc(n),i=e.key.path.Z().rt();if(e instanceof ys){var o=function(t,e){return{name:_a(t,e.key),fields:e.vt().mapValue.fields,updateTime:ga(t,e.version.G())}}(t.Ms,e),s=e.hasCommittedMutations;return new mc(null,null,o,s,r,i)}if(e instanceof gs){var u=e.key.path.rt(),a=Vc(e.version);return s=e.hasCommittedMutations,new mc(null,new yc(u,a),null,s,r,i)}if(e instanceof ms){var c=e.key.path.rt(),h=Vc(e.version);return new mc(new gc(c,h),null,null,!0,r,i)}return so()}function Rc(t){var e=t.G();return[e.seconds,e.nanoseconds]}function Mc(t){var e=new Co(t[0],t[1]);return Po.W(e)}function Vc(t){var e=t.G();return new fc(e.seconds,e.nanoseconds)}function Uc(t){var e=new Co(t.seconds,t.nanoseconds);return Po.W(e)}function jc(t,e){for(var n=(e.baseMutations||[]).map((function(e){return ka(t.Ms,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return ka(t.Ms,e)})),s=Co.fromMillis(e.localWriteTimeMs);return new Oc(e.batchId,s,n,o)}function Fc(t){var e,n,r=Uc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Uc(t.lastLimboFreeSnapshotVersion):Po.min();return void 0!==t.query.documents?(uo(1===(n=t.query).documents.length),e=Js(qs(Aa(n.documents[0])))):e=function(t){return Js(La(t))}(t.query),new nu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,vo.fromBase64String(t.resumeToken))}function qc(t,e){var n,r=Vc(e.Mt),i=Vc(e.lastLimboFreeSnapshotVersion);n=_s(e.target)?Ca(t.Ms,e.target):Pa(t.Ms,e.target);var o=e.resumeToken.toBase64();return new wc(e.targetId,Es(e.target),r,o,e.sequenceNumber,i,n)}function zc(t){var e=La({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ws(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Hc=function(){function t(){}return t.prototype.Ls=function(t,e){return Bc(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Uc(e.createTime),version:e.version};var e}))},t.prototype.$s=function(t,e){return Bc(t).put({bundleId:(n=e).id,createTime:Vc(wa(n.createTime)),version:n.version});var n},t.prototype.Bs=function(t,e){return Gc(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:zc(e.bundledQuery),readTime:Uc(e.readTime)};var e}))},t.prototype.qs=function(t,e){return Gc(t).put(function(t){return{name:t.name,readTime:Vc(wa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Bc(t){return Dc(t,Nc.store)}function Gc(t){return Dc(t,Ac.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Kc=function(){function t(){this.Us=new $c}return t.prototype.Qs=function(t,e){return this.Us.add(e),$a.resolve()},t.prototype.Ks=function(t,e){return $a.resolve(this.Us.getEntries(e))},t}(),$c=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new Bu(Ro.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Bu(Ro.J)).rt()},t}(),Jc=function(){function t(){this.Ws=new $c}return t.prototype.Qs=function(t,e){var n=this;if(!this.Ws.has(e)){var r=e.et(),i=e.Z();t.ps((function(){n.Ws.add(e)}));var o={collectionId:r,parent:uc(i)};return Wc(t).put(o)}return $a.resolve()},t.prototype.Ks=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[po(e),""],!1,!0);return Wc(t).os(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(hc(o.parent))}return n}))},t}();function Wc(t){return Dc(t,_c.store)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Xc={js:!1,Gs:0,zs:0,Hs:0},Yc=function(){function t(t,e,n){this.Js=t,this.Ys=e,this.Xs=n}return t.Zs=function(e){return new t(e,t.ti,t.ei)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Qc(t){return tt(this,void 0,void 0,(function(){return et(this,(function(e){if(t.code!==yo.FAILED_PRECONDITION||t.message!==oc)throw t;return no("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Yc.ti=10,Yc.ei=1e3,Yc.ni=new Yc(41943040,Yc.ti,Yc.ei),Yc.si=new Yc(-1,0,0);var Zc=function(){function t(t,e){this.ii=t,this.ri=e,this.oi={}}return t.prototype.get=function(t){var e=this.ii(t),n=this.oi[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.ri(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ii(t),r=this.oi[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ri(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.oi[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ii(t),n=this.oi[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ri(n[r][0],t))return 1===n.length?delete this.oi[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Fo(this.oi,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.nt=function(){return qo(this.oi)},t}(),th=function(){function t(){this.ci=new Zc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.ai=!1}return t.prototype.ui=function(t){var e=this.ci.get(t);return e?e.readTime:Po.min()},t.prototype.hi=function(t,e){this.li(),this.ci.set(t.key,{_i:t,readTime:e})},t.prototype.fi=function(t,e){void 0===e&&(e=null),this.li(),this.ci.set(t,{_i:null,readTime:e})},t.prototype.di=function(t,e){this.li();var n=this.ci.get(e);return void 0!==n?$a.resolve(n._i):this.wi(t,e)},t.prototype.getEntries=function(t,e){return this.Ei(t,e)},t.prototype.apply=function(t){return this.li(),this.ai=!0,this.Ti(t)},t.prototype.li=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function eh(t,e,n){var r=t.store(dc.store),i=t.store(vc.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.ls({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){uo(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=vc.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return $a.$n(o).next((function(){return c}))}function nh(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw so();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var rh=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ii=n,this.mi=r,this.Ai={}}return t.Ri=function(e,n,r,i){return uo(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Pi=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oh(t).ls({index:dc.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.yi=function(t,e,n,r){var i=this,o=sh(t),s=oh(t);return s.add({}).next((function(u){uo("number"==typeof u);for(var a=new Oc(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Oa(t.Ms,e)})),i=n.mutations.map((function(e){return Oa(t.Ms,e)}));return new dc(e,n.batchId,n.Ds.toMillis(),r,i)}(i.Kt,i.userId,a),h=[],f=new Bu((function(t,e){return fo(t.ot(),e.ot())})),l=0,p=r;l<p.length;l++){var d=p[l],v=vc.key(i.userId,d.key.path,u);f=f.add(d.key.path.Z()),h.push(s.put(c)),h.push(o.put(v,vc.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Ii.Qs(t,e))})),t.ps((function(){i.Ai[u]=a.keys()})),$a.$n(h).next((function(){return a}))}))},t.prototype.gi=function(t,e){var n=this;return oh(t).get(e).next((function(t){return t?(uo(t.userId===n.userId),jc(n.Kt,t)):null}))},t.prototype.Vi=function(t,e){var n=this;return this.Ai[e]?$a.resolve(this.Ai[e]):this.gi(t,e).next((function(t){if(t){var r=t.keys();return n.Ai[e]=r,r}return null}))},t.prototype.pi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return oh(t).ls({index:dc.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(uo(e.batchId>=r),o=jc(n.Kt,e)),i.done()})).next((function(){return o}))},t.prototype.bi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return oh(t).ls({index:dc.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.vi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return oh(t).os(dc.userMutationsIndex,n).next((function(t){return t.map((function(t){return jc(e.Kt,t)}))}))},t.prototype.Si=function(t,e){var n=this,r=vc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return sh(t).ls({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=hc(a);if(u===n.userId&&e.path.isEqual(h))return oh(t).get(c).next((function(t){if(!t)throw so();uo(t.userId===n.userId),o.push(jc(n.Kt,t))}));s.done()})).next((function(){return o}))},t.prototype.Di=function(t,e){var n=this,r=new Bu(fo),i=[];return e.forEach((function(e){var o=vc.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=sh(t).ls({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=hc(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),$a.$n(i).next((function(){return n.Ci(t,r)}))},t.prototype.xi=function(t,e){var n=this,r=e.path,i=r.length+1,o=vc.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new Bu(fo);return sh(t).ls({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=hc(a);s===n.userId&&r.st(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Ci(t,u)}))},t.prototype.Ci=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(oh(t).get(e).next((function(t){if(null===t)throw so();uo(t.userId===n.userId),r.push(jc(n.Kt,t))})))})),$a.$n(i).next((function(){return r}))},t.prototype.Ni=function(t,e){var n=this;return eh(t.vs,this.userId,e).next((function(r){return t.ps((function(){n.Fi(e.batchId)})),$a.forEach(r,(function(e){return n.mi.Oi(t,e)}))}))},t.prototype.Fi=function(t){delete this.Ai[t]},t.prototype.ki=function(t){var e=this;return this.Pi(t).next((function(n){if(!n)return $a.resolve();var r=IDBKeyRange.lowerBound(vc.prefixForUser(e.userId)),i=[];return sh(t).ls({range:r},(function(t,n,r){if(t[0]===e.userId){var o=hc(t[1]);i.push(o)}else r.done()})).next((function(){uo(0===i.length)}))}))},t.prototype.Mi=function(t,e){return ih(t,this.userId,e)},t.prototype.Li=function(t){var e=this;return uh(t).get(this.userId).next((function(t){return t||new pc(e.userId,-1,"")}))},t}();function ih(t,e,n){var r=vc.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return sh(t).ls({range:o,hs:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function oh(t){return Dc(t,dc.store)}function sh(t){return Dc(t,vc.store)}function uh(t){return Dc(t,pc.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ah=function(){function t(t){this.$i=t}return t.prototype.next=function(){return this.$i+=2,this.$i},t.Bi=function(){return new t(0)},t.qi=function(){return new t(-1)},t}(),ch=function(){function t(t,e){this.mi=t,this.Kt=e}return t.prototype.Ui=function(t){var e=this;return this.Qi(t).next((function(n){var r=new ah(n.highestTargetId);return n.highestTargetId=r.next(),e.Ki(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Wi=function(t){return this.Qi(t).next((function(t){return Po.W(new Co(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.ji=function(t){return this.Qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Gi=function(t,e,n){var r=this;return this.Qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ki(t,i)}))},t.prototype.zi=function(t,e){var n=this;return this.Hi(t,e).next((function(){return n.Qi(t).next((function(r){return r.targetCount+=1,n.Ji(e,r),n.Ki(t,r)}))}))},t.prototype.Yi=function(t,e){return this.Hi(t,e)},t.prototype.Xi=function(t,e){var n=this;return this.Zi(t,e.targetId).next((function(){return hh(t).delete(e.targetId)})).next((function(){return n.Qi(t)})).next((function(e){return uo(e.targetCount>0),e.targetCount-=1,n.Ki(t,e)}))},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return hh(t).ls((function(s,u){var a=Fc(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Xi(t,a)))})).next((function(){return $a.$n(o)})).next((function(){return i}))},t.prototype.mn=function(t,e){return hh(t).ls((function(t,n){var r=Fc(n);e(r)}))},t.prototype.Qi=function(t){return fh(t).get(Ic.key).next((function(t){return uo(null!==t),t}))},t.prototype.Ki=function(t,e){return fh(t).put(Ic.key,e)},t.prototype.Hi=function(t,e){return hh(t).put(qc(this.Kt,e))},t.prototype.Ji=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.er=function(t){return this.Qi(t).next((function(t){return t.targetCount}))},t.prototype.nr=function(t,e){var n=Es(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return hh(t).ls({range:r,index:wc.queryTargetsIndexName},(function(t,n,r){var o=Fc(n);Is(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.sr=function(t,e,n){var r=this,i=[],o=lh(t);return e.forEach((function(e){var s=uc(e.path);i.push(o.put(new Ec(n,s))),i.push(r.mi.ir(t,n,e))})),$a.$n(i)},t.prototype.rr=function(t,e,n){var r=this,i=lh(t);return $a.forEach(e,(function(e){var o=uc(e.path);return $a.$n([i.delete([n,o]),r.mi.cr(t,n,e)])}))},t.prototype.Zi=function(t,e){var n=lh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ar=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=lh(t),i=Zu();return r.ls({range:n,hs:!0},(function(t,e,n){var r=hc(t[1]),o=new Uo(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=uc(e.path),r=IDBKeyRange.bound([n],[po(n)],!1,!0),i=0;return lh(t).ls({index:Ec.documentTargetsIndex,hs:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Dn=function(t,e){return hh(t).get(e).next((function(t){return t?Fc(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hh(t){return Dc(t,wc.store)}function fh(t){return Dc(t,Ic.store)}function lh(t){return Dc(t,Ec.store)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ph(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=fo(n,i);return 0===s?fo(r,o):s}var dh=function(){function t(t){this.ur=t,this.buffer=new Bu(ph),this.hr=0}return t.prototype.lr=function(){return++this.hr},t.prototype._r=function(t){var e=[t,this.lr()];if(this.buffer.size<this.ur)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ph(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),vh=function(){function t(t,e){this.dr=t,this.fs=e,this.wr=!1,this.Er=null}return t.prototype.start=function(t){-1!==this.dr.params.Js&&this.Tr(t)},t.prototype.stop=function(){this.Er&&(this.Er.cancel(),this.Er=null)},Object.defineProperty(t.prototype,"Ir",{get:function(){return null!==this.Er},enumerable:!1,configurable:!0}),t.prototype.Tr=function(t){var e=this,n=this.wr?3e5:6e4;no("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Er=this.fs.mr("lru_garbage_collection",n,(function(){return tt(e,void 0,void 0,(function(){var e;return et(this,(function(n){switch(n.label){case 0:this.Er=null,this.wr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ar(this.dr)];case 2:return n.sent(),[3,7];case 3:return Qa(e=n.sent())?(no("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Qc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Tr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),yh=function(){function t(t,e){this.Rr=t,this.params=e}return t.prototype.Pr=function(t,e){return this.Rr.yr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.gr=function(t,e){var n=this;if(0===e)return $a.resolve(ko.U);var r=new dh(e);return this.Rr.mn(t,(function(t){return r._r(t.sequenceNumber)})).next((function(){return n.Rr.Vr(t,(function(t){return r._r(t)}))})).next((function(){return r.maxValue}))},t.prototype.tr=function(t,e,n){return this.Rr.tr(t,e,n)},t.prototype.pr=function(t,e){return this.Rr.pr(t,e)},t.prototype.br=function(t,e){var n=this;return-1===this.params.Js?(no("LruGarbageCollector","Garbage collection skipped; disabled"),$a.resolve(Xc)):this.vr(t).next((function(r){return r<n.params.Js?(no("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Js),Xc):n.Sr(t,e)}))},t.prototype.vr=function(t){return this.Rr.vr(t)},t.prototype.Sr=function(t,e){var n,r,i,o,s,u,a,c=this,h=Date.now();return this.Pr(t,this.params.Ys).next((function(e){return e>c.params.Xs?(no("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Xs+" from "+e),r=c.params.Xs):r=e,o=Date.now(),c.gr(t,r)})).next((function(r){return n=r,s=Date.now(),c.tr(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.pr(t,n)})).next((function(t){return a=Date.now(),eo()<=Tt.DEBUG&&no("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-h)+"ms"),$a.resolve({js:!0,Gs:r,zs:i,Hs:t})}))},t}(),gh=function(){function t(t,e){this.db=t,this.dr=function(t,e){return new yh(t,e)}(this,e)}return t.prototype.yr=function(t){var e=this.Dr(t);return this.db.Cr().er(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Dr=function(t){var e=0;return this.Vr(t,(function(t){e++})).next((function(){return e}))},t.prototype.mn=function(t,e){return this.db.Cr().mn(t,e)},t.prototype.Vr=function(t,e){return this.Nr(t,(function(t,n){return e(n)}))},t.prototype.ir=function(t,e,n){return mh(t,n)},t.prototype.cr=function(t,e,n){return mh(t,n)},t.prototype.tr=function(t,e,n){return this.db.Cr().tr(t,e,n)},t.prototype.Oi=function(t,e){return mh(t,e)},t.prototype.Fr=function(t,e){return function(t,e){var n=!1;return uh(t)._s((function(r){return ih(t,r,e).next((function(t){return t&&(n=!0),$a.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.pr=function(t,e){var n=this,r=this.db.kr().Or(),i=[],o=0;return this.Nr(t,(function(s,u){if(u<=e){var a=n.Fr(t,s).next((function(e){if(!e)return o++,r.di(t,s).next((function(){return r.fi(s),lh(t).delete([0,uc(s.path)])}))}));i.push(a)}})).next((function(){return $a.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.Ss);return this.db.Cr().Yi(t,n)},t.prototype.Mr=function(t,e){return mh(t,e)},t.prototype.Nr=function(t,e){var n,r=lh(t),i=ko.U;return r.ls({index:Ec.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==ko.U&&e(new Uo(hc(n)),i),i=u,n=s):i=ko.U})).next((function(){i!==ko.U&&e(new Uo(hc(n)),i)}))},t.prototype.vr=function(t){return this.db.kr().Lr(t)},t}();function mh(t,e){return lh(t).put(function(t,e){return new Ec(0,uc(t.path),e)}(e,t.Ss))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var bh=function(){function t(t,e){this.Kt=t,this.Ii=e}return t.prototype.hi=function(t,e,n){return Ih(t).put(_h(e),n)},t.prototype.fi=function(t,e){var n=Ih(t),r=_h(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.$r(t,r)}))},t.prototype.di=function(t,e){var n=this;return Ih(t).get(_h(e)).next((function(t){return n.Br(t)}))},t.prototype.qr=function(t,e){var n=this;return Ih(t).get(_h(e)).next((function(t){var e=n.Br(t);return e?{_i:e,size:nh(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Ju();return this.Ur(t,e,(function(t,e){var i=n.Br(e);r=r.Ht(t,i)})).next((function(){return r}))},t.prototype.Qr=function(t,e){var n=this,r=Ju(),i=new qu(Uo.J);return this.Ur(t,e,(function(t,e){var o=n.Br(e);o?(r=r.Ht(t,o),i=i.Ht(t,nh(e))):(r=r.Ht(t,null),i=i.Ht(t,0))})).next((function(){return{Kr:r,Wr:i}}))},t.prototype.Ur=function(t,e,n){if(e.nt())return $a.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return Ih(t).ls({range:r},(function(t,e,r){for(var s=Uo.Tt(t);o&&Uo.J(o,s)<0;)n(o,null),o=i.ce();o&&o.isEqual(s)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ae()?i.ce():null}))},t.prototype.jr=function(t,e,n){var r=this,i=Xu(),o=e.path.length+1,s={};if(n.isEqual(Po.min())){var u=e.path.rt();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.rt(),c=Rc(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=mc.collectionReadTimeIndex}return Ih(t).ls(s,(function(t,n,s){if(t.length===o){var u=Pc(r.Kt,n);e.path.st(u.key.path)?u instanceof ys&&Zs(e,u)&&(i=i.Ht(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.Or=function(t){return new wh(this,!!t&&t.Gr)},t.prototype.Lr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Eh(t).get(bc.key).next((function(t){return uo(!!t),t}))},t.prototype.$r=function(t,e){return Eh(t).put(bc.key,e)},t.prototype.Br=function(t){if(t){var e=Pc(this.Kt,t);return e instanceof gs&&e.version.isEqual(Po.min())?null:e}return null},t}(),wh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zr=e,r.Gr=n,r.Hr=new Zc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Q(e,t),e.prototype.Ti=function(t){var e=this,n=[],r=0,i=new Bu((function(t,e){return fo(t.ot(),e.ot())}));return this.ci.forEach((function(o,s){var u=e.Hr.get(o);if(s._i){var a=Lc(e.zr.Kt,s._i,e.ui(o));i=i.add(o.path.Z());var c=nh(a);r+=c-u,n.push(e.zr.hi(t,o,a))}else if(r-=u,e.Gr){var h=Lc(e.zr.Kt,new gs(o,Po.min()),e.ui(o));n.push(e.zr.hi(t,o,h))}else n.push(e.zr.fi(t,o))})),i.forEach((function(r){n.push(e.zr.Ii.Qs(t,r))})),n.push(this.zr.updateMetadata(t,r)),$a.$n(n)},e.prototype.wi=function(t,e){var n=this;return this.zr.qr(t,e).next((function(t){return null===t?(n.Hr.set(e,0),null):(n.Hr.set(e,t.size),t._i)}))},e.prototype.Ei=function(t,e){var n=this;return this.zr.Qr(t,e).next((function(t){var e=t.Kr;return t.Wr.forEach((function(t,e){n.Hr.set(t,e)})),e}))},e}(th);function Eh(t){return Dc(t,bc.store)}function Ih(t){return Dc(t,mc.store)}function _h(t){return t.path.rt()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Th=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;uo(n<r&&n>=0&&r<=11);var o=new Ja("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(lc.store)}(t),function(t){t.createObjectStore(pc.store,{keyPath:pc.keyPath}),t.createObjectStore(dc.store,{keyPath:dc.keyPath,autoIncrement:!0}).createIndex(dc.userMutationsIndex,dc.userMutationsKeyPath,{unique:!0}),t.createObjectStore(vc.store)}(t),Nh(t),function(t){t.createObjectStore(mc.store)}(t));var s=$a.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ec.store),t.deleteObjectStore(wc.store),t.deleteObjectStore(Ic.store)}(t),Nh(t)),s=s.next((function(){return function(t){var e=t.store(Ic.store),n=new Ic(0,0,Po.min().G(),0);return e.put(Ic.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(dc.store).os().next((function(n){t.deleteObjectStore(dc.store),t.createObjectStore(dc.store,{keyPath:dc.keyPath,autoIncrement:!0}).createIndex(dc.userMutationsIndex,dc.userMutationsKeyPath,{unique:!0});var r=e.store(dc.store),i=n.map((function(t){return r.put(t)}));return $a.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Tc.store,{keyPath:Tc.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Jr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(bc.store)}(t),i.Yr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Xr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Zr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(mc.store);e.createIndex(mc.readTimeIndex,mc.readTimeIndexPath,{unique:!1}),e.createIndex(mc.collectionReadTimeIndex,mc.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.eo(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Nc.store,{keyPath:Nc.keyPath})}(t),function(t){t.createObjectStore(Ac.store,{keyPath:Ac.keyPath})}(t)}))),s},t.prototype.Yr=function(t){var e=0;return t.store(mc.store).ls((function(t,n){e+=nh(n)})).next((function(){var n=new bc(e);return t.store(bc.store).put(bc.key,n)}))},t.prototype.Jr=function(t){var e=this,n=t.store(pc.store),r=t.store(dc.store);return n.os().next((function(n){return $a.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(dc.userMutationsIndex,i).next((function(r){return $a.forEach(r,(function(r){uo(r.userId===n.userId);var i=jc(e.Kt,r);return eh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Xr=function(t){var e=t.store(Ec.store),n=t.store(mc.store);return t.store(Ic.store).get(Ic.key).next((function(t){var r=[];return n.ls((function(n,i){var o=new Ro(n),s=function(t){return[0,uc(t)]}(o);r.push(e.get(s).next((function(n){return n?$a.resolve():function(n){return e.put(new Ec(0,uc(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return $a.$n(r)}))}))},t.prototype.Zr=function(t,e){t.createObjectStore(_c.store,{keyPath:_c.keyPath});var n=e.store(_c.store),r=new $c,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:uc(i)})}};return e.store(mc.store).ls({hs:!0},(function(t,e){var n=new Ro(t);return i(n.Z())})).next((function(){return e.store(vc.store).ls({hs:!0},(function(t,e){t[0];var n=t[1],r=(t[2],hc(n));return i(r.Z())}))}))},t.prototype.eo=function(t){var e=this,n=t.store(wc.store);return n.ls((function(t,r){var i=Fc(r),o=qc(e.Kt,i);return n.put(o)}))},t}();function Nh(t){t.createObjectStore(Ec.store,{keyPath:Ec.keyPath}).createIndex(Ec.documentTargetsIndex,Ec.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(wc.store,{keyPath:wc.keyPath}).createIndex(wc.queryTargetsIndexName,wc.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ic.store)}var Ah="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Sh=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.no=o,this.window=s,this.document=u,this.so=c,this.io=h,this.ro=null,this.oo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.co=null,this.inForeground=!1,this.ao=null,this.uo=null,this.ho=Number.NEGATIVE_INFINITY,this.lo=function(t){return Promise.resolve()},!t.Wn())throw new go(yo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.mi=new gh(this,i),this._o=n+"main",this.Kt=new Cc(a),this.fo=new Wa(this._o,11,new Th(this.Kt)),this.wo=new ch(this.mi,this.Kt),this.Ii=new Jc,this.Eo=function(t,e){return new bh(t,e)}(this.Kt,this.Ii),this.To=new Hc,this.window&&this.window.localStorage?this.Io=this.window.localStorage:(this.Io=null,!1===h&&ro("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.mo().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new go(yo.FAILED_PRECONDITION,Ah);return t.Ao(),t.Ro(),t.Po(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.wo.ji(e)}))})).then((function(e){t.ro=new ko(e,t.so)})).then((function(){t.oo=!0})).catch((function(e){return t.fo&&t.fo.close(),Promise.reject(e)}))},t.prototype.yo=function(t){var e=this;return this.lo=function(n){return tt(e,void 0,void 0,(function(){return et(this,(function(e){return this.Ir?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Vo=function(t){var e=this;this.fo.Zn((function(n){return tt(e,void 0,void 0,(function(){return et(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.po=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.no.ys((function(){return tt(e,void 0,void 0,(function(){return et(this,(function(t){switch(t.label){case 0:return this.Ir?[4,this.mo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.mo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Dh(e).put(new Tc(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.bo(e).next((function(e){e||(t.isPrimary=!1,t.no.vo((function(){return t.lo(!1)})))}))})).next((function(){return t.So(e)})).next((function(n){return t.isPrimary&&!n?t.Do(e).next((function(){return!1})):!!n&&t.Co(e).next((function(){return!0}))}))})).catch((function(e){if(Qa(e))return no("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return no("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.no.vo((function(){return t.lo(e)})),t.isPrimary=e}))},t.prototype.bo=function(t){var e=this;return xh(t).get(lc.key).next((function(t){return $a.resolve(e.xo(t))}))},t.prototype.No=function(t){return Dh(t).delete(this.clientId)},t.prototype.Fo=function(){return tt(this,void 0,void 0,(function(){var t,e,n,r,i=this;return et(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.Oo(this.ho,18e5)?[3,2]:(this.ho=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Dc(t,Tc.store);return e.os().next((function(t){var n=i.ko(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return $a.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Io)for(e=0,n=t;e<n.length;e++)r=n[e],this.Io.removeItem(this.Mo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Po=function(){var t=this;this.uo=this.no.mr("client_metadata_refresh",4e3,(function(){return t.mo().then((function(){return t.Fo()})).then((function(){return t.Po()}))}))},t.prototype.xo=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.So=function(t){var e=this;return this.io?$a.resolve(!0):xh(t).get(lc.key).next((function(n){if(null!==n&&e.Oo(n.leaseTimestampMs,5e3)&&!e.Lo(n.ownerId)){if(e.xo(n)&&e.networkEnabled)return!0;if(!e.xo(n)){if(!n.allowTabSynchronization)throw new go(yo.FAILED_PRECONDITION,Ah);return!1}}return!(!e.networkEnabled||!e.inForeground)||Dh(t).os().next((function(t){return void 0===e.ko(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&no("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.$o=function(){return tt(this,void 0,void 0,(function(){var t=this;return et(this,(function(e){switch(e.label){case 0:return this.oo=!1,this.Bo(),this.uo&&(this.uo.cancel(),this.uo=null),this.qo(),this.Uo(),[4,this.fo.runTransaction("shutdown","readwrite",[lc.store,Tc.store],(function(e){var n=new xc(e,ko.U);return t.Do(n).next((function(){return t.No(n)}))}))];case 1:return e.sent(),this.fo.close(),this.Qo(),[2]}}))}))},t.prototype.ko=function(t,e){var n=this;return t.filter((function(t){return n.Oo(t.updateTimeMs,e)&&!n.Lo(t.clientId)}))},t.prototype.Ko=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Dh(e).os().next((function(e){return t.ko(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Wo=function(t){return rh.Ri(t,this.Kt,this.Ii,this.mi)},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.jo=function(){return this.Ii},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r=this;no("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.fo.runTransaction(t,o,Sc,(function(o){return i=new xc(o,r.ro?r.ro.next():ko.U),"readwrite-primary"===e?r.bo(i).next((function(t){return!!t||r.So(i)})).next((function(e){if(!e)throw ro("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.no.vo((function(){return r.lo(!1)})),new go(yo.FAILED_PRECONDITION,oc);return n(i)})).next((function(t){return r.Co(i).next((function(){return t}))})):r.zo(i).next((function(){return n(i)}))})).then((function(t){return i.bs(),t}))},t.prototype.zo=function(t){var e=this;return xh(t).get(lc.key).next((function(t){if(null!==t&&e.Oo(t.leaseTimestampMs,5e3)&&!e.Lo(t.ownerId)&&!e.xo(t)&&!(e.io||e.allowTabSynchronization&&t.allowTabSynchronization))throw new go(yo.FAILED_PRECONDITION,Ah)}))},t.prototype.Co=function(t){var e=new lc(this.clientId,this.allowTabSynchronization,Date.now());return xh(t).put(lc.key,e)},t.Wn=function(){return Wa.Wn()},t.prototype.Do=function(t){var e=this,n=xh(t);return n.get(lc.key).next((function(t){return e.xo(t)?(no("IndexedDbPersistence","Releasing primary lease."),n.delete(lc.key)):$a.resolve()}))},t.prototype.Oo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ro("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ao=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ao=function(){t.no.ys((function(){return t.inForeground="visible"===t.document.visibilityState,t.mo()}))},this.document.addEventListener("visibilitychange",this.ao),this.inForeground="visible"===this.document.visibilityState)},t.prototype.qo=function(){this.ao&&(this.document.removeEventListener("visibilitychange",this.ao),this.ao=null)},t.prototype.Ro=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.co=function(){e.Bo(),e.no.ys((function(){return e.$o()}))},this.window.addEventListener("unload",this.co))},t.prototype.Uo=function(){this.co&&(this.window.removeEventListener("unload",this.co),this.co=null)},t.prototype.Lo=function(t){var e;try{var n=null!==(null===(e=this.Io)||void 0===e?void 0:e.getItem(this.Mo(t)));return no("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ro("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Bo=function(){if(this.Io)try{this.Io.setItem(this.Mo(this.clientId),String(Date.now()))}catch(t){ro("Failed to set zombie client id.",t)}},t.prototype.Qo=function(){if(this.Io)try{this.Io.removeItem(this.Mo(this.clientId))}catch(t){}},t.prototype.Mo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function xh(t){return Dc(t,lc.store)}function Dh(t){return Dc(t,Tc.store)}function Oh(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var kh=function(){function t(t,e,n){this.Eo=t,this.Ho=e,this.Ii=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.Si(t,e).next((function(r){return n.Yo(t,e,r)}))},t.prototype.Yo=function(t,e,n){return this.Eo.di(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Ns(e,t);return t}))},t.prototype.Xo=function(t,e,n){var r=Ju();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Ns(t,e);r=r.Ht(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.Eo.getEntries(t,e).next((function(e){return n.tc(t,e)}))},t.prototype.tc=function(t,e){var n=this;return this.Ho.Di(t,e).next((function(r){var i=n.Xo(t,e,r),o=$u();return i.forEach((function(t,e){e||(e=new gs(t,Po.min())),o=o.Ht(t,e)})),o}))},t.prototype.jr=function(t,e,n){return function(t){return Uo.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):Ks(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new Uo(e)).next((function(t){var e=Xu();return t instanceof ys&&(e=e.Ht(t.key,t)),e}))},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=Xu();return this.Ii.Ks(t,i).next((function(s){return $a.forEach(s,(function(s){var u=function(t,e){return new js(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.sc(t,u,n).next((function(t){t.forEach((function(t,e){o=o.Ht(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.Eo.jr(t,e,n).next((function(n){return r=n,o.Ho.xi(t,e)})).next((function(e){return i=e,o.ic(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=Tu(a,h,h,o.Ds);r=f instanceof ys?r.Ht(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Zs(e,n)||(r=r.remove(t))})),r}))},t.prototype.ic=function(t,e,n){for(var r=Zu(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof Du&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.Eo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof ys&&(c=c.Ht(t,e))})),c}))},t}(),Ch=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=Zu(),i=Zu(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ph=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.jr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(Po.min())?this.hc(t,e):this.uc.Zo(t,r).next((function(o){var s=i.lc(e,o);return(zs(e)||Hs(e))&&i._c(e.limitType,s,r,n)?i.hc(t,e):(eo()<=Tt.DEBUG&&no("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Qs(e)),i.uc.jr(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ht(e.key,e)})),t})))}))},t.prototype.lc=function(t,e){var n=new Bu(tu(t));return e.forEach((function(e,r){r instanceof ys&&Zs(t,r)&&(n=n.add(r))})),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return eo()<=Tt.DEBUG&&no("QueryEngine","Using full collection scan to execute query:",Qs(e)),this.uc.jr(t,e,Po.min())},t}(),Lh=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new qu(fo),this.wc=new Zc((function(t){return Es(t)}),Is),this.Ec=Po.min(),this.Ho=t.Wo(n),this.Tc=t.kr(),this.wo=t.Cr(),this.Ic=new kh(this.Tc,this.Ho,this.persistence.jo()),this.To=t.Go(),this.fc.ac(this.Ic)}return t.prototype.Ar=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.br(n,e.dc)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rh(t,e,n,r){return new Lh(t,e,n,r)}function Mh(t,e){return tt(this,void 0,void 0,(function(){var n,r,i,o;return et(this,(function(s){switch(s.label){case 0:return n=ao(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ho.vi(t).next((function(s){return o=s,r=n.persistence.Wo(e),i=new kh(n.Tc,r,n.persistence.jo()),r.vi(t)})).next((function(e){for(var n=[],r=[],s=Zu(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Zo(t,s).next((function(t){return{mc:t,Ac:n,Rc:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),o)]}}))}))}function Vh(t,e){var n=ao(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Tc.Or({Gr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=$a.resolve();return o.forEach((function(t){s=s.next((function(){return r.di(e,t)})).next((function(e){var o=e,s=n.ks.get(t);uo(null!==s),(!o||o.version.u(s)<0)&&(o=i.Cs(t,o,n))&&r.hi(o,n.Os)}))})),s.next((function(){return t.Ho.Ni(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ho.ki(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}function Uh(t){var e=ao(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.wo.Wi(t)}))}function jh(t,e){var n=ao(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Tc.Or({Gr:!0});i=n.dc;var s=[];e.Oe.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.wo.rr(t,e.Ke,o).next((function(){return n.wo.sr(t,e.Ue,o)})));var a=e.resumeToken;if(a.o()>0){var c=u.$t(a,r).Lt(t.Ss);i=i.Ht(o,c),function(t,e,n){return uo(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.j()-t.Mt.j()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(u,c,e)&&s.push(n.wo.Yi(t,c))}}}));var u=$u();if(e.Me.forEach((function(r,i){e.Le.has(r)&&s.push(n.persistence.mi.Mr(t,r))})),s.push(function(t,e,n,r,i){var o=Zu();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=$u();return n.forEach((function(n,s){var u=t.get(n),a=(null==i?void 0:i.get(n))||r;s instanceof gs&&s.version.isEqual(Po.min())?(e.fi(n,a),o=o.Ht(n,s)):null==u||s.version.u(u.version)>0||0===s.version.u(u.version)&&u.hasPendingWrites?(e.hi(s,a),o=o.Ht(n,s)):no("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",s.version)})),o}))}(t,o,e.Me,r,void 0).next((function(t){u=t}))),!r.isEqual(Po.min())){var a=n.wo.Wi(t).next((function(e){return n.wo.Gi(t,t.Ss,r)}));s.push(a)}return $a.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Ic.tc(t,u)}))})).then((function(t){return n.dc=i,t}))}function Fh(t,e){var n=ao(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ho.pi(t,e)}))}function qh(t,e){var n=ao(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.wo.nr(t,e).next((function(i){return i?(r=i,$a.resolve(r)):n.wo.Ui(t).next((function(i){return r=new nu(e,i,0,t.Ss),n.wo.zi(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t}))}function zh(t,e,n){return tt(this,void 0,void 0,(function(){var r,i,o,s;return et(this,(function(u){switch(u.label){case 0:r=ao(t),i=r.dc.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.mi.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!Qa(s=u.sent()))throw s;return no("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}}))}))}function Hh(t,e,n){var r=ao(t),i=Po.min(),o=Zu();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=ao(t),i=r.wc.get(n);return void 0!==i?$a.resolve(r.dc.get(i)):r.wo.nr(e,n)}(r,t,Js(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.wo.ar(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.fc.jr(t,e,n?i:Po.min(),n?o:Zu())})).next((function(t){return{documents:t,Pc:o}}))}))}function Bh(t,e){var n=ao(t),r=ao(n.wo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Dn(t,e).next((function(t){return t?t.target:null}))}))}function Gh(t){var e=ao(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=ao(t),i=$u(),o=Rc(n),s=Ih(e),u=IDBKeyRange.lowerBound(o,!0);return s.ls({index:mc.readTimeIndex,range:u},(function(t,e){var n=Pc(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime})).next((function(){return{gs:i,readTime:Mc(o)}}))}(e.Tc,t,e.Ec)})).then((function(t){var n=t.gs,r=t.readTime;return e.Ec=r,n}))}function Kh(t){return tt(this,void 0,void 0,(function(){var e;return et(this,(function(n){return[2,(e=ao(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Ih(t),n=Po.min();return e.ls({index:mc.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Mc(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ec=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var $h=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ls=function(t,e){return $a.resolve(this.bc.get(e))},t.prototype.$s=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:wa(n.createTime)}),$a.resolve()},t.prototype.Bs=function(t,e){return $a.resolve(this.vc.get(e))},t.prototype.qs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:zc(t.bundledQuery),readTime:wa(t.readTime)}}(e)),$a.resolve()},t}(),Jh=function(){function t(){this.Sc=new Bu(Wh.Dc),this.Cc=new Bu(Wh.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.ir=function(t,e){var n=new Wh(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.cr=function(t,e){this.Fc(new Wh(t,e))},t.prototype.Oc=function(t,e){var n=this;t.forEach((function(t){return n.cr(t,e)}))},t.prototype.kc=function(t){var e=this,n=new Uo(new Ro([])),r=new Wh(n,t),i=new Wh(n,t+1),o=[];return this.Cc.Ae([r,i],(function(t){e.Fc(t),o.push(t.key)})),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach((function(e){return t.Fc(e)}))},t.prototype.Fc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new Uo(new Ro([])),n=new Wh(e,t),r=new Wh(e,t+1),i=Zu();return this.Cc.Ae([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new Wh(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),Wh=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return Uo.J(t.key,e.key)||fo(t.$c,e.$c)},t.xc=function(t,e){return fo(t.$c,e.$c)||Uo.J(t.key,e.key)},t}(),Xh=function(){function t(t,e){this.Ii=t,this.mi=e,this.Ho=[],this.Bc=1,this.qc=new Bu(Wh.Dc)}return t.prototype.Pi=function(t){return $a.resolve(0===this.Ho.length)},t.prototype.yi=function(t,e,n,r){var i=this.Bc;this.Bc++,this.Ho.length>0&&this.Ho[this.Ho.length-1];var o=new Oc(i,e,n,r);this.Ho.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.qc=this.qc.add(new Wh(a.key,i)),this.Ii.Qs(t,a.key.path.Z())}return $a.resolve(o)},t.prototype.gi=function(t,e){return $a.resolve(this.Uc(e))},t.prototype.pi=function(t,e){var n=e+1,r=this.Qc(n),i=r<0?0:r;return $a.resolve(this.Ho.length>i?this.Ho[i]:null)},t.prototype.bi=function(){return $a.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.vi=function(t){return $a.resolve(this.Ho.slice())},t.prototype.Si=function(t,e){var n=this,r=new Wh(e,0),i=new Wh(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],(function(t){var e=n.Uc(t.$c);o.push(e)})),$a.resolve(o)},t.prototype.Di=function(t,e){var n=this,r=new Bu(fo);return e.forEach((function(t){var e=new Wh(t,0),i=new Wh(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],(function(t){r=r.add(t.$c)}))})),$a.resolve(this.Kc(r))},t.prototype.xi=function(t,e){var n=e.path,r=n.length+1,i=n;Uo.Et(i)||(i=i.child(""));var o=new Wh(new Uo(i),0),s=new Bu(fo);return this.qc.Re((function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(s=s.add(t.$c)),!0)}),o),$a.resolve(this.Kc(s))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Uc(t);null!==r&&n.push(r)})),n},t.prototype.Ni=function(t,e){var n=this;uo(0===this.Wc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return $a.forEach(e.mutations,(function(i){var o=new Wh(i.key,e.batchId);return r=r.delete(o),n.mi.Oi(t,i.key)})).next((function(){n.qc=r}))},t.prototype.Fi=function(t){},t.prototype.Mi=function(t,e){var n=new Wh(e,0),r=this.qc.Pe(n);return $a.resolve(e.isEqual(r&&r.key))},t.prototype.ki=function(t){return this.Ho.length,$a.resolve()},t.prototype.Wc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),Yh=function(){function t(t,e){this.Ii=t,this.jc=e,this.docs=new qu(Uo.J),this.size=0}return t.prototype.hi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jc(e);return this.docs=this.docs.Ht(r,{_i:e,size:s,readTime:n}),this.size+=s-o,this.Ii.Qs(t,r.path.Z())},t.prototype.fi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.di=function(t,e){var n=this.docs.get(e);return $a.resolve(n?n._i:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ju();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ht(t,e?e._i:null)})),$a.resolve(r)},t.prototype.jr=function(t,e,n){for(var r=Xu(),i=new Uo(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),u=s.key,a=s.value,c=a._i,h=a.readTime;if(!e.path.st(u.path))break;h.u(n)<=0||c instanceof ys&&Zs(e,c)&&(r=r.Ht(c.key,c))}return $a.resolve(r)},t.prototype.Gc=function(t,e){return $a.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Or=function(t){return new Qh(this)},t.prototype.Lr=function(t){return $a.resolve(this.size)},t}(),Qh=function(t){function e(e){var n=this;return(n=t.call(this)||this).zr=e,n}return Q(e,t),e.prototype.Ti=function(t){var e=this,n=[];return this.ci.forEach((function(r,i){i&&i._i?n.push(e.zr.hi(t,i._i,e.ui(r))):e.zr.fi(r)})),$a.$n(n)},e.prototype.wi=function(t,e){return this.zr.di(t,e)},e.prototype.Ei=function(t,e){return this.zr.getEntries(t,e)},e}(th),Zh=function(){function t(t){this.persistence=t,this.zc=new Zc((function(t){return Es(t)}),Is),this.lastRemoteSnapshotVersion=Po.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new Jh,this.targetCount=0,this.Yc=ah.Bi()}return t.prototype.mn=function(t,e){return this.zc.forEach((function(t,n){return e(n)})),$a.resolve()},t.prototype.Wi=function(t){return $a.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ji=function(t){return $a.resolve(this.Hc)},t.prototype.Ui=function(t){return this.highestTargetId=this.Yc.next(),$a.resolve(this.highestTargetId)},t.prototype.Gi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),$a.resolve()},t.prototype.Hi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new ah(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.zi=function(t,e){return this.Hi(e),this.targetCount+=1,$a.resolve()},t.prototype.Yi=function(t,e){return this.Hi(e),$a.resolve()},t.prototype.Xi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,$a.resolve()},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.zc.delete(s),o.push(r.Zi(t,u.targetId)),i++)})),$a.$n(o).next((function(){return i}))},t.prototype.er=function(t){return $a.resolve(this.targetCount)},t.prototype.nr=function(t,e){var n=this.zc.get(e)||null;return $a.resolve(n)},t.prototype.sr=function(t,e,n){return this.Jc.Nc(e,n),$a.resolve()},t.prototype.rr=function(t,e,n){this.Jc.Oc(e,n);var r=this.persistence.mi,i=[];return r&&e.forEach((function(e){i.push(r.Oi(t,e))})),$a.$n(i)},t.prototype.Zi=function(t,e){return this.Jc.kc(e),$a.resolve()},t.prototype.ar=function(t,e){var n=this.Jc.Lc(e);return $a.resolve(n)},t.prototype.Mi=function(t,e){return $a.resolve(this.Jc.Mi(e))},t}(),tf=function(){function t(t,e){var n=this;this.Xc={},this.ro=new ko(0),this.oo=!1,this.oo=!0,this.mi=t(this),this.wo=new Zh(this),this.Ii=new Kc,this.Eo=function(t,e){return new Yh(t,(function(t){return n.mi.Zc(t)}))}(this.Ii),this.Kt=new Cc(e),this.To=new $h(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.$o=function(){return this.oo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Vo=function(){},t.prototype.po=function(){},t.prototype.jo=function(){return this.Ii},t.prototype.Wo=function(t){var e=this.Xc[t.R()];return e||(e=new Xh(this.Ii,this.mi),this.Xc[t.R()]=e),e},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r=this;no("MemoryPersistence","Starting transaction:",t);var i=new ef(this.ro.next());return this.mi.ta(),n(i).next((function(t){return r.mi.ea(i).next((function(){return t}))})).Mn().then((function(t){return i.bs(),t}))},t.prototype.na=function(t,e){return $a.Bn(Object.values(this.Xc).map((function(n){return function(){return n.Mi(t,e)}})))},t}(),ef=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ss=e,n}return Q(e,t),e}(sc),nf=function(){function t(t){this.persistence=t,this.sa=new Jh,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw so()},enumerable:!1,configurable:!0}),t.prototype.ir=function(t,e,n){return this.sa.ir(n,e),this.oa.delete(n.toString()),$a.resolve()},t.prototype.cr=function(t,e,n){return this.sa.cr(n,e),this.oa.add(n.toString()),$a.resolve()},t.prototype.Oi=function(t,e){return this.oa.add(e.toString()),$a.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach((function(t){return n.oa.add(t.toString())}));var r=this.persistence.Cr();return r.ar(t,e.targetId).next((function(t){t.forEach((function(t){return n.oa.add(t.toString())}))})).next((function(){return r.Xi(t,e)}))},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.kr().Or();return $a.forEach(this.oa,(function(r){var i=Uo.ft(r);return e.ca(t,i).next((function(t){t||n.fi(i)}))})).next((function(){return e.ia=null,n.apply(t)}))},t.prototype.Mr=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())}))},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return $a.Bn([function(){return $a.resolve(n.sa.Mi(e))},function(){return n.persistence.Cr().Mi(t,e)},function(){return n.persistence.na(t,e)}])},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rf(t,e){return"firestore_clients_"+t+"_"+e}function of(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function sf(t,e){return"firestore_targets_"+t+"_"+e}var uf=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new go(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(ro("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),af=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new go(r.error.code,r.error.message)),i?new t(e,r.state,o):(ro("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),cf=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ea(),s=0;i&&s<r.activeTargetIds.length;++s)i=Qo(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ro("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),hf=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ro("SharedClientState","Failed to parse online state: "+e),null)},t}(),ff=function(){function t(){this.activeTargetIds=ea()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),lf=function(){function t(t,e,n,r,i){this.window=t,this.no=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new qu(fo),this.Ir=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=rf(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new ff),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.Wn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return tt(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,h,f=this;return et(this,(function(l){switch(l.label){case 0:return[4,this.fa.Ko()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(rf(this.persistenceKey,r)))&&(o=cf.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(s=this.storage.getItem(this.ga))&&(u=this.ba(s))&&this.va(u),a=0,c=this.Ia;a<c.length;a++)h=c[a],this.Ea(h);return this.Ia=[],this.window.addEventListener("unload",(function(){return f.$o()})),this.Ir=!0,[2]}}))}))},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Fa=function(t,e,n){this.Na(t,e,n),this.Oa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(sf(this.persistenceKey,t));if(n){var r=af.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(sf(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach((function(t){r.Oa(t)})),this.currentUser=t,n.forEach((function(t){r.xa(t)}))},t.prototype.Ka=function(t){this.Wa(t)},t.prototype.ja=function(){this.Ga()},t.prototype.$o=function(){this.Ir&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Ir=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return no("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){no("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){no("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(no("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void ro("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.no.vo((function(){return tt(e,void 0,void 0,(function(){var t,e,r,i,o,s;return et(this,(function(u){if(this.Ir){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(o=this.ba(n.newValue)))return[2,this.va(o)]}else if(n.key===this.Aa)(s=function(t){var e=ko.U;if(null!=t)try{var n=JSON.parse(t);uo("number"==typeof n),e=n}catch(t){ro("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ko.U&&this.L(s);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new uf(this.currentUser,t,e,n),i=of(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Oa=function(t){var e=of(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Wa=function(t){var e={clientId:this._a,onlineState:t};this.storage.setItem(this.ga,JSON.stringify(e))},t.prototype.Ua=function(t,e,n){var r=sf(this.persistenceKey,t),i=new af(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return cf.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return uf.aa(new No(i),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return af.aa(r,e)},t.prototype.ba=function(t){return hf.aa(t)},t.prototype.Xa=function(t){return tt(this,void 0,void 0,(function(){return et(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(no("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.fa.iu(s,u).then((function(){n.Ta=r}))},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=ea();return t.forEach((function(t,n){e=e.ye(n.activeTargetIds)})),e},t}(),pf=function(){function t(){this.ru=new ff,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Fa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new ff,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.$o=function(){},t.prototype.q=function(t){},t.prototype.ja=function(){},t}(),df=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.$o=function(){},t}(),vf=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.$o=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){no("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){no("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.Wn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),yf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},gf=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),mf=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return Q(e,t),e.prototype.Du=function(t,e,n,r){return new Promise((function(i,o){var s=new Zi;s.listenOnce(Ji.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case $i.NO_ERROR:var e=s.getResponseJson();no("Connection","XHR received:",JSON.stringify(e)),i(e);break;case $i.TIMEOUT:no("Connection",'RPC "'+t+'" timed out'),o(new go(yo.DEADLINE_EXCEEDED,"Request time out"));break;case $i.HTTP_ERROR:var n=s.getStatus();if(no("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(yo).indexOf(e)>=0?e:yo.UNKNOWN}(r.status);o(new go(u,r.message))}else o(new go(yo.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new go(yo.UNAVAILABLE,"Connection failed."));break;default:so()}}finally{no("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.xu=function(t,e){var n,r=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new zi,o=Bn(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())||"object"==typeof navigator&&"ReactNative"===navigator.product||at().indexOf("Electron/")>=0||function(){var t=at();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||at().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");no("Connection","Creating WebChannel: "+u,s);var a=i.createWebChannel(u,s),c=!1,h=!1,f=new gf({du:function(t){h?no("Connection","Not sending because WebChannel is closed:",t):(c||(no("Connection","Opening WebChannel transport."),a.open(),c=!0),no("Connection","WebChannel sending:",t),a.send(t))},wu:function(){return a.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(a,Qi.EventType.OPEN,(function(){h||no("Connection","WebChannel transport opened.")})),l(a,Qi.EventType.CLOSE,(function(){h||(h=!0,no("Connection","WebChannel transport closed"),f.Pu())})),l(a,Qi.EventType.ERROR,(function(t){h||(h=!0,io("Connection","WebChannel transport errored:",t),f.Pu(new go(yo.UNAVAILABLE,"The operation could not be completed")))})),l(a,Qi.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];uo(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){no("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Lu[t];if(void 0!==e)return Fu(e)}(o),u=i.message;void 0===s&&(s=yo.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),h=!0,f.Pu(new go(s,u)),a.close()}else no("Connection","WebChannel received:",n),f.yu(n)}})),l(o,Wi.STAT_EVENT,(function(t){t.stat===Xi?no("Connection","Detected buffering proxy"):t.stat===Yi&&no("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Ru()}),0),f},e}(function(){function t(t){this.gu=t,this.T=t.T;var e=t.ssl?"https":"http";this.Vu=e+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);no("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then((function(t){return no("RestConnection","Received: ",t),t}),(function(e){throw io("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.1",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){var n=yf[t];return this.Vu+"/v1/"+e+":"+n},t}());
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bf(){return"undefined"!=typeof window?window:null}function wf(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ef(t){return new ya(t,!0)}var If=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.no=t,this.ds=e,this.Nu=n,this.Fu=r,this.Ou=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Ou},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&no("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.no.mr(this.ds,i,(function(){return e.Lu=Date.now(),t()})),this.ku*=this.Fu,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Ou&&(this.ku=this.Ou)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),_f=function(){function t(t,e,n,r,i,o){this.no=t,this.Qu=n,this.Ku=r,this.Wu=i,this.listener=o,this.state=0,this.ju=0,this.Gu=null,this.stream=null,this.zu=new If(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return tt(this,void 0,void 0,(function(){return et(this,(function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.no.mr(this.Qu,6e4,(function(){return t.th()})))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return tt(this,void 0,void 0,(function(){return et(this,(function(t){return this.Ju()?[2,this.close(0)]:[2]}))}))},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return tt(this,void 0,void 0,(function(){return et(this,(function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.ju++,3!==t?this.zu.reset():e&&e.code===yo.RESOURCE_EXHAUSTED?(ro(e.toString()),ro("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===yo.UNAUTHENTICATED&&this.Wu.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.ju),n=this.ju;this.Wu.getToken().then((function(e){t.ju===n&&t.rh(e)}),(function(n){e((function(){var e=new go(yo.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)}))}))},t.prototype.rh=function(t){var e=this,n=this.ih(this.ju);this.stream=this.ah(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream.Iu((function(t){n((function(){return e.oh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu((function(){return tt(t,void 0,void 0,(function(){return et(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.oh=function(t){return no("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.no.ys((function(){return e.ju===t?n():(no("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Tf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,s}return Q(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:so()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(uo(void 0===e||"string"==typeof e),vo.fromBase64String(e||"")):(uo(void 0===e||e instanceof Uint8Array),vo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?yo.UNKNOWN:Fu(t.code);return new go(e,t.message||"")}(u);n=new ca(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ta(t,r.document.name),o=wa(r.document.updateTime);var u=new ls({mapValue:{fields:r.document.fields}}),a=(s=new ys(i,o,u,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new ua(a,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ta(t,r.document),o=r.readTime?wa(r.readTime):Po.min(),u=new gs(i,o),s=r.removedTargetIds||[],n=new ua([],s,u.key,u);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ta(t,r.document),o=r.removedTargetIds||[],n=new ua([],o,i,null);else{if(!("filter"in e))return so();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Uu(r),o=h.targetId,n=new aa(o,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return Po.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Po.min():e.readTime?wa(e.readTime):Po.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=Sa(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=_s(r)?{documents:Ca(t,r)}:{query:Pa(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=ma(t,e.resumeToken):e.Mt.u(Po.min())>0&&(n.readTime=ga(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return so()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(this.Kt,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=Sa(this.Kt),e.removeTarget=t,this.eh(e)},e}(_f),Nf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,s._h=!1,s}return Q(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(uo(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(uo(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?wa(t.updateTime):wa(e);n.isEqual(Po.min())&&(n=wa(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new bu(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=wa(t.commitTime);return this.listener.wh(n,e)}return uo(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=Sa(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Oa(e.Kt,t)}))};this.eh(n)},e}(_f),Af=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return Q(e,t),e.prototype.mh=function(){if(this.Ih)throw new go(yo.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.bu(t,e,n,i)})).catch((function(t){throw t.code===yo.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.Cu(t,e,n,i)})).catch((function(t){throw t.code===yo.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.terminate=function(){this.Ih=!1},e}((function(){})),Sf=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.mr("online_state_timeout",1e4,(function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()})))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(ro(e),this.Ph=!1):no("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),xf=function(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Fh=new Set,this.Oh=[],this.kh=i,this.kh.cu((function(t){n.ys((function(){return tt(o,void 0,void 0,(function(){return et(this,(function(t){switch(t.label){case 0:return Vf(this)?(no("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return tt(this,void 0,void 0,(function(){var e;return et(this,(function(n){switch(n.label){case 0:return(e=ao(t)).Fh.add(4),[4,Of(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Fh.delete(4),[4,Df(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mh=new Sf(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Df(t){return tt(this,void 0,void 0,(function(){var e,n;return et(this,(function(r){switch(r.label){case 0:if(!Vf(t))return[3,4];e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Of(t){return tt(this,void 0,void 0,(function(){var e,n;return et(this,(function(r){switch(r.label){case 0:e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function kf(t,e){var n=ao(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),Mf(n)?Rf(n):Qf(n).Ju()&&Pf(n,e))}function Cf(t,e){var n=ao(t),r=Qf(n);n.Nh.delete(e),r.Ju()&&Lf(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():Vf(n)&&n.Mh.set("Unknown"))}function Pf(t,e){t.Lh.cn(e.targetId),Qf(t).hh(e)}function Lf(t,e){t.Lh.cn(e),Qf(t).lh(e)}function Rf(t){t.Lh=new fa({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),Qf(t).start(),t.Mh.yh()}function Mf(t){return Vf(t)&&!Qf(t).Hu()&&t.Nh.size>0}function Vf(t){return 0===ao(t).Fh.size}function Uf(t){t.Lh=void 0}function jf(t){return tt(this,void 0,void 0,(function(){return et(this,(function(e){return t.Nh.forEach((function(e,n){Pf(t,e)})),[2]}))}))}function Ff(t,e){return tt(this,void 0,void 0,(function(){return et(this,(function(n){return Uf(t),Mf(t)?(t.Mh.ph(e),Rf(t)):t.Mh.set("Unknown"),[2]}))}))}function qf(t,e,n){return tt(this,void 0,void 0,(function(){var r,i,o;return et(this,(function(s){switch(s.label){case 0:if(t.Mh.set("Online"),!(e instanceof ca&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return tt(this,void 0,void 0,(function(){var n,r,i,o;return et(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.Nh.has(o)?[4,t.Ch.$h(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.Nh.delete(o),t.Lh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),no("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,zf(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ua?t.Lh.wn(e):e instanceof aa?t.Lh.yn(e):t.Lh.In(e),n.isEqual(Po.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Uh(t.Sh)];case 8:return i=s.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Oe.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}})),n.ke.forEach((function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(vo.h,n.Mt)),Lf(t,e);var r=new nu(n.target,e,1,n.sequenceNumber);Pf(t,r)}})),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return no("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,zf(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function zf(t,e,n){return tt(this,void 0,void 0,(function(){var r=this;return et(this,(function(i){switch(i.label){case 0:if(!Qa(e))throw e;return t.Fh.add(1),[4,Of(t)];case 1:return i.sent(),t.Mh.set("Offline"),n||(n=function(){return Uh(t.Sh)}),t.fs.vo((function(){return tt(r,void 0,void 0,(function(){return et(this,(function(e){switch(e.label){case 0:return no("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Fh.delete(1),[4,Df(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Hf(t,e){return e().catch((function(n){return zf(t,n,e)}))}function Bf(t){return tt(this,void 0,void 0,(function(){var e,n,r,i,o;return et(this,(function(s){switch(s.label){case 0:e=ao(t),n=Zf(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Vf(t)&&t.xh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Fh(e.Sh,r)];case 3:return null===(i=s.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=Zf(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,zf(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Gf(e)&&Kf(e),[2]}}))}))}function Gf(t){return Vf(t)&&!Zf(t).Hu()&&t.xh.length>0}function Kf(t){Zf(t).start()}function $f(t){return tt(this,void 0,void 0,(function(){return et(this,(function(e){return Zf(t).Th(),[2]}))}))}function Jf(t){return tt(this,void 0,void 0,(function(){var e,n,r,i;return et(this,(function(o){for(e=Zf(t),n=0,r=t.xh;n<r.length;n++)i=r[n],e.dh(i.mutations);return[2]}))}))}function Wf(t,e,n){return tt(this,void 0,void 0,(function(){var r,i;return et(this,(function(o){switch(o.label){case 0:return r=t.xh.shift(),i=kc.from(r,e,n),[4,Hf(t,(function(){return t.Ch.qh(i)}))];case 1:return o.sent(),[4,Bf(t)];case 2:return o.sent(),[2]}}))}))}function Xf(t,e){return tt(this,void 0,void 0,(function(){return et(this,(function(n){switch(n.label){case 0:return e&&Zf(t).fh?[4,function(t,e){return tt(this,void 0,void 0,(function(){var n,r;return et(this,(function(i){switch(i.label){case 0:return ju(r=e.code)&&r!==yo.ABORTED?(n=t.xh.shift(),Zf(t).Xu(),[4,Hf(t,(function(){return t.Ch.Uh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Bf(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Gf(t)&&Kf(t),[2]}}))}))}function Yf(t,e){return tt(this,void 0,void 0,(function(){var n;return et(this,(function(r){switch(r.label){case 0:return n=ao(t),e?(n.Fh.delete(2),[4,Df(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Fh.add(2),[4,Of(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Qf(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=ao(t);return r.mh(),new Tf(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:jf.bind(null,t),Iu:Ff.bind(null,t),uh:qf.bind(null,t)}),t.Oh.push((function(n){return tt(e,void 0,void 0,(function(){return et(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),Mf(t)?Rf(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),Uf(t),e.label=3;case 3:return[2]}}))}))}))),t.Qh}function Zf(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=ao(t);return r.mh(),new Nf(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:$f.bind(null,t),Iu:Xf.bind(null,t),Eh:Jf.bind(null,t),wh:Wf.bind(null,t)}),t.Oh.push((function(n){return tt(e,void 0,void 0,(function(){return et(this,(function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,Bf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(no("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kh
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var tl=function(){this.Wh=void 0,this.listeners=[]},el=function(){this.queries=new Zc((function(t){return Ys(t)}),Xs),this.onlineState="Unknown",this.jh=new Set};function nl(t,e){return tt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return et(this,(function(c){switch(c.label){case 0:if(n=ao(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new tl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Gh(r)];case 2:return s.Wh=c.sent(),[3,4];case 3:return u=c.sent(),a=ic(u,"Initialization of query '"+Qs(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zh(n.onlineState),o.Wh&&e.Hh(o.Wh)&&sl(n),[2]}}))}))}function rl(t,e){return tt(this,void 0,void 0,(function(){var n,r,i,o,s;return et(this,(function(u){return n=ao(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]}))}))}function il(t,e){for(var n=ao(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].Hh(s)&&(r=!0);a.Wh=s}}r&&sl(n)}function ol(t,e,n){var r=ao(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function sl(t){t.jh.forEach((function(t){t.next()}))}var ul=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ia(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.sl&&n||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){if(t.docChanges.length>0)return!0;var e=this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites;return!(!t.xe&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=ia.Fe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),al=function(t){this.key=t},cl=function(t){this.key=t},hl=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=Zu(),this.Ce=Zu(),this.ll=tu(t),this._l=new na(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new ra,i=e?e._l:this._l,o=e?e.Ce:this.Ce,s=i,u=!1,a=zs(this.query)&&i.size===this.query.limit?i.last():null,c=Hs(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt((function(t,e){var h=i.get(t),f=e instanceof ys?e:null;f&&(f=Zs(n.query,f)?f:null);var l=!!h&&n.Ce.has(h.key),p=!!f&&(f.bt||n.Ce.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.El(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.ll(f,a)>0||c&&n.ll(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),zs(this.query)||Hs(this.query))for(;s.size>this.query.limit;){var h=zs(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{_l:s,wl:r,_c:u,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ti=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return so()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)})),this.Tl(n);var s=e?this.Il():[],u=0===this.hl.size&&this.qe?1:0,a=u!==this.ul;return this.ul=u,0!==o.length||a?{snapshot:new ia(this.query,t._l,i,o,t.Ce,0===u,a,!1),ml:s}:{ml:s}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ti({_l:this._l,wl:new ra,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach((function(t){return e.al=e.al.add(t)})),t.Qe.forEach((function(t){})),t.Ke.forEach((function(t){return e.al=e.al.delete(t)})),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=Zu(),this._l.forEach((function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))}));var n=[];return e.forEach((function(e){t.hl.has(e)||n.push(new cl(e))})),this.hl.forEach((function(t){e.has(t)||n.push(new al(t))})),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=Zu();var e=this.dl(t.documents);return this.Ti(e,!0)},t.prototype.Pl=function(){return ia.Fe(this.query,this._l,this.Ce,0===this.ul)},t}(),fl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ll=function(t){this.key=t,this.yl=!1},pl=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new Zc((function(t){return Ys(t)}),Xs),this.Dl=new Map,this.Cl=[],this.xl=new qu(Uo.J),this.Nl=new Map,this.Fl=new Jh,this.Ol={},this.kl=new Map,this.Ml=ah.qi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function dl(t,e){return tt(this,void 0,void 0,(function(){var n,r,i,o,s,u;return et(this,(function(a){switch(a.label){case 0:return n=Hl(t),(o=n.Sl.get(e))?(r=o.targetId,n.pl.ka(r),i=o.view.Pl(),[3,4]):[3,1];case 1:return[4,qh(n.Sh,Js(e))];case 2:return s=a.sent(),u=n.pl.ka(s.targetId),r=s.targetId,[4,vl(n,e,r,"current"===u)];case 3:i=a.sent(),n.$l&&kf(n.gl,s),a.label=4;case 4:return[2,i]}}))}))}function vl(t,e,n,r){return tt(this,void 0,void 0,(function(){var i,o,s,u,a,c;return et(this,(function(h){switch(h.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return tt(this,void 0,void 0,(function(){var i,o,s;return et(this,(function(u){switch(u.label){case 0:return(i=e.view.dl(n))._c?[4,Hh(t.Sh,e.query,!1).then((function(t){var n=t.documents;return e.view.dl(n,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.Oe.get(e.targetId),s=e.view.Ti(i,t.$l,o),[2,(xl(t,e.targetId,s.ml),s.snapshot)]}}))}))}(t,e,n,r)},[4,Hh(t.Sh,e,!0)];case 1:return i=h.sent(),o=new hl(e,i.Pc),s=o.dl(i.documents),u=sa.Be(n,r&&"Offline"!==t.onlineState),a=o.Ti(s,t.$l,u),xl(t,n,a.ml),c=new fl(e,n,o),[2,(t.Sl.set(e,c),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),a.snapshot)]}}))}))}function yl(t,e){return tt(this,void 0,void 0,(function(){var n,r,i;return et(this,(function(o){switch(o.label){case 0:return n=ao(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter((function(t){return!Xs(t,e)}))),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,zh(n.Sh,r.targetId,!1).then((function(){n.pl.Ba(r.targetId),Cf(n.gl,r.targetId),Al(n,r.targetId)})).catch(Qc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Al(n,r.targetId),[4,zh(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function gl(t,e,n){return tt(this,void 0,void 0,(function(){var r,i,o,s;return et(this,(function(u){switch(u.label){case 0:r=Bl(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(t,e){var n,r=ao(t),i=Co.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Zu());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ic.Zo(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=Nu(c,n.get(c.key));null!=h&&s.push(new Du(c.key,h,ds(h.proto.mapValue),wu.exists(!0)))}return r.Ho.yi(t,i,s,e)}))})).then((function(t){var e=t.Fs(n);return{batchId:t.batchId,ci:e}}))}(r.Sh,e)];case 2:return i=u.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Ol[t.currentUser.R()];r||(r=new qu(fo)),r=r.Ht(e,n),t.Ol[t.currentUser.R()]=r}(r,i.batchId,n),[4,kl(r,i.ci)];case 3:return u.sent(),[4,Bf(r.gl)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=ic(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function ml(t,e){return tt(this,void 0,void 0,(function(){var n,r;return et(this,(function(i){switch(i.label){case 0:n=ao(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,jh(n.Sh,e)];case 2:return r=i.sent(),e.Oe.forEach((function(t,e){var r=n.Nl.get(e);r&&(uo(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?uo(r.yl):t.Ke.size>0&&(uo(r.yl),r.yl=!1))})),[4,kl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Qc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function bl(t,e,n){var r=ao(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach((function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ao(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)})),r&&sl(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function wl(t,e,n){return tt(this,void 0,void 0,(function(){var r,i,o,s,u,a;return et(this,(function(c){switch(c.label){case 0:return(r=ao(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(o=i&&i.key)?(s=(s=new qu(Uo.J)).Ht(o,new gs(o,Po.min())),u=Zu().add(o),a=new oa(Po.min(),new Map,new Bu(fo),s,u),[4,ml(r,a)]):[3,2];case 1:return c.sent(),r.xl=r.xl.remove(o),r.Nl.delete(e),Ol(r),[3,4];case 2:return[4,zh(r.Sh,e,!1).then((function(){return Al(r,e,n)})).catch(Qc)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function El(t,e){return tt(this,void 0,void 0,(function(){var n,r,i;return et(this,(function(o){switch(o.label){case 0:n=ao(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Vh(n.Sh,e)];case 2:return i=o.sent(),Nl(n,r,null),Tl(n,r),n.pl.Fa(r,"acknowledged"),[4,kl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Qc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Il(t,e,n){return tt(this,void 0,void 0,(function(){var r,i;return et(this,(function(o){switch(o.label){case 0:r=ao(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ao(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ho.gi(t,e).next((function(e){return uo(null!==e),r=e.keys(),n.Ho.Ni(t,e)})).next((function(){return n.Ho.ki(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}(r.Sh,e)];case 2:return i=o.sent(),Nl(r,e,n),Tl(r,e),r.pl.Fa(e,"rejected",n),[4,kl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Qc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function _l(t,e){return tt(this,void 0,void 0,(function(){var n,r,i,o,s;return et(this,(function(u){switch(u.label){case 0:Vf((n=ao(t)).gl)||no("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=ao(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ho.bi(t)}))}(n.Sh)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return o=u.sent(),s=ic(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Tl(t,e){(t.kl.get(e)||[]).forEach((function(t){t.resolve()})),t.kl.delete(e)}function Nl(t,e,n){var r=ao(t),i=r.Ol[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ol[r.currentUser.R()]=i}}function Al(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Fl.kc(e).forEach((function(e){t.Fl.Mi(e)||Sl(t,e)}))}function Sl(t,e){var n=t.xl.get(e);null!==n&&(Cf(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),Ol(t))}function xl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof al?(t.Fl.ir(o.key,e),Dl(t,o)):o instanceof cl?(no("SyncEngine","Document no longer in limbo: "+o.key),t.Fl.cr(o.key,e),t.Fl.Mi(o.key)||Sl(t,o.key)):so()}}function Dl(t,e){var n=e.key;t.xl.get(n)||(no("SyncEngine","New document in limbo: "+n),t.Cl.push(n),Ol(t))}function Ol(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new ll(e)),t.xl=t.xl.Ht(e,n),kf(t.gl,new nu(Js(qs(e.path)),n,2,ko.U))}}function kl(t,e,n){return tt(this,void 0,void 0,(function(){var r,i,o,s;return et(this,(function(u){switch(u.label){case 0:return r=ao(t),i=[],o=[],s=[],r.Sl.nt()?[3,3]:(r.Sl.forEach((function(t,u){s.push(r.Bl(u,e,n).then((function(t){if(t){r.$l&&r.pl.qa(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ch.cc(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.vl.uh(i),[4,function(t,e){return tt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h;return et(this,(function(f){switch(f.label){case 0:n=ao(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return $a.forEach(e,(function(e){return $a.forEach(e.rc,(function(r){return n.persistence.mi.ir(t,e.targetId,r)})).next((function(){return $a.forEach(e.oc,(function(r){return n.persistence.mi.cr(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!Qa(r=f.sent()))throw r;return no("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(a=n.dc.get(u),c=a.Mt,h=a.Bt(c),n.dc=n.dc.Ht(u,h));return[2]}}))}))}(r.Sh,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Cl(t,e){return tt(this,void 0,void 0,(function(){var n,r;return et(this,(function(i){switch(i.label){case 0:return(n=ao(t)).currentUser.isEqual(e)?[3,3]:(no("SyncEngine","User change. New user:",e.R()),[4,Mh(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach((function(t){t.forEach((function(t){t.reject(new go(yo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,kl(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Pl(t,e){var n=ao(t),r=n.Nl.get(e);if(r&&r.yl)return Zu().add(r.key);var i=Zu(),o=n.Dl.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Sl.get(a);i=i.ye(c.view.fl)}return i}function Ll(t,e){return tt(this,void 0,void 0,(function(){var n,r,i;return et(this,(function(o){switch(o.label){case 0:return[4,Hh((n=ao(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&xl(n,e.targetId,i.ml),i)]}}))}))}function Rl(t){return tt(this,void 0,void 0,(function(){var e;return et(this,(function(n){return[2,Gh((e=ao(t)).Sh).then((function(t){return kl(e,t)}))]}))}))}function Ml(t,e,n,r){return tt(this,void 0,void 0,(function(){var i,o;return et(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=ao(t),r=ao(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Vi(t,e).next((function(e){return e?n.Ic.Zo(t,e):$a.resolve(null)}))}))}((i=ao(t)).Sh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Bf(i.gl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Nl(i,e,r||null),Tl(i,e),function(t,e){ao(ao(t).Ho).Fi(e)}(i.Sh,e)):so(),s.label=4;case 4:return[4,kl(i,o)];case 5:return s.sent(),[3,7];case 6:no("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Vl(t,e){return tt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return et(this,(function(h){switch(h.label){case 0:return Hl(n=ao(t)),Bl(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,Ul(n,r.rt())]);case 1:return i=h.sent(),n.Ll=!0,[4,Yf(n.gl,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)u=s[o],kf(n.gl,u);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(a=[],c=Promise.resolve(),n.Dl.forEach((function(t,e){n.pl.$a(e)?a.push(e):c=c.then((function(){return Al(n,e),zh(n.Sh,e,!0)})),Cf(n.gl,e)})),[4,c]);case 4:return h.sent(),[4,Ul(n,a)];case 5:return h.sent(),function(t){var e=ao(t);e.Nl.forEach((function(t,n){Cf(e.gl,n)})),e.Fl.Mc(),e.Nl=new Map,e.xl=new qu(Uo.J)}(n),n.Ll=!1,[4,Yf(n.gl,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function Ul(t,e,n){return tt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h,f,l,p,d,v;return et(this,(function(y){switch(y.label){case 0:n=ao(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],a=void 0,(c=n.Dl.get(u))&&0!==c.length?[4,qh(n.Sh,Js(c[0]))]:[3,7]):[3,13];case 2:a=y.sent(),h=0,f=c,y.label=3;case 3:return h<f.length?(l=f[h],p=n.Sl.get(l),[4,Ll(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Bh(n.Sh,u)];case 8:return v=y.sent(),[4,qh(n.Sh,v)];case 9:return a=y.sent(),[4,vl(n,jl(v),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(a),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}}))}))}function jl(t){return Fs(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Fl(t){var e=ao(t);return ao(ao(e.Sh).persistence).Ko()}function ql(t,e,n,r){return tt(this,void 0,void 0,(function(){var i,o,s;return et(this,(function(u){switch(u.label){case 0:return(i=ao(t)).Ll?(no("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Gh(i.Sh)];case 3:return o=u.sent(),s=oa.$e(e,"current"===n),[4,kl(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,zh(i.Sh,e,!0)];case 6:return u.sent(),Al(i,e,r),[3,8];case 7:so(),u.label=8;case 8:return[2]}}))}))}function zl(t,e,n){return tt(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f,l;return et(this,(function(p){switch(p.label){case 0:if(!(r=Hl(t)).Ll)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Dl.has(s)?(no("SyncEngine","Adding an already active target "+s),[3,5]):[4,Bh(r.Sh,s)]):[3,6];case 2:return u=p.sent(),[4,qh(r.Sh,u)];case 3:return a=p.sent(),[4,vl(r,jl(u),a.targetId,!1)];case 4:p.sent(),kf(r.gl,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return et(this,(function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,zh(r.Sh,t,!1).then((function(){Cf(r.gl,t),Al(r,t)})).catch(Qc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,p.label=7;case 7:return h<f.length?(l=f[h],[5,c(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Hl(t){var e=ao(t);return e.gl.Ch.Bh=ml.bind(null,e),e.gl.Ch.Sn=Pl.bind(null,e),e.gl.Ch.$h=wl.bind(null,e),e.vl.uh=il.bind(null,e.Vl),e.vl.ql=ol.bind(null,e.Vl),e}function Bl(t){var e=ao(t);return e.gl.Ch.qh=El.bind(null,e),e.gl.Ch.Uh=Il.bind(null,e),e}var Gl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return tt(this,void 0,void 0,(function(){return et(this,(function(e){switch(e.label){case 0:return this.Kt=Ef(t.gu.T),this.pl=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Rh(this.persistence,new Ph,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new tf(nf.ra,this.Kt)},t.prototype.jl=function(t){return new pf},t.prototype.terminate=function(){return tt(this,void 0,void 0,(function(){return et(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.$o()];case 1:return t.sent(),[4,this.persistence.$o()];case 2:return t.sent(),[2]}}))}))},t}(),Kl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Q(e,t),e.prototype.initialize=function(e){return tt(this,void 0,void 0,(function(){return et(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Kh(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,Bl(this.Xl.fa)];case 4:return n.sent(),[4,Bf(this.Xl.gl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return Rh(this.persistence,new Ph,t.Yl,this.Kt)},e.prototype.Hl=function(t){var e=this.persistence.mi.dr;return new vh(e,t.fs)},e.prototype.Gl=function(t){var e=Oh(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?Yc.Zs(this.cacheSizeBytes):Yc.ni;return new Sh(this.synchronizeTabs,e,t.clientId,n,t.fs,bf(),wf(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.jl=function(t){return new pf},e}(Gl),$l=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Q(e,t),e.prototype.initialize=function(e){return tt(this,void 0,void 0,(function(){var n,r=this;return et(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.fa,this.pl instanceof lf?(this.pl.fa={nu:Ml.bind(null,n),su:ql.bind(null,n),iu:zl.bind(null,n),Ko:Fl.bind(null,n),eu:Rl.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.yo((function(t){return tt(r,void 0,void 0,(function(){return et(this,(function(e){switch(e.label){case 0:return[4,Vl(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Ir?this.zl.start(this.Sh):t||this.zl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.jl=function(t){var e=bf();if(!lf.Wn(e))throw new go(yo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Oh(t.gu.T,t.gu.persistenceKey);return new lf(e,t.fs,n,t.clientId,t.Yl)},e}(Kl),Jl=function(){function t(){}return t.prototype.initialize=function(t,e){return tt(this,void 0,void 0,(function(){var n=this;return et(this,(function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return bl(n.fa,t,1)},this.gl.Ch.s_=Cl.bind(null,this.fa),[4,Yf(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new el},t.prototype.Zl=function(t){var e,n=Ef(t.gu.T),r=(e=t.gu,new mf(e));return function(t,e,n){return new Af(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return bl(s.fa,t,0)},o=vf.Wn()?new vf:new df,new xf(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var u=new pl(t,e,n,r,i,o);return s&&(u.Ll=!0),u}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return tt(this,void 0,void 0,(function(){var e;return et(this,(function(n){switch(n.label){case 0:return e=ao(t),no("RemoteStore","RemoteStore shutting down."),e.Fh.add(5),[4,Of(e)];case 1:return n.sent(),e.kh.$o(),e.Mh.set("Unknown"),[2]}}))}))}(this.gl)},t}(),Wl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Xl=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new go(yo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new Vo(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}(),Yl=function(t){this._methodName=t};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Ql(t,e,n){if(!n)throw new go(yo.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Zl(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new go(yo.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function tp(t,e,n,r){if(!0===e&&!0===r)throw new go(yo.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ep(t){if(!Uo.Et(t))throw new go(yo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function np(t){if(Uo.Et(t))throw new go(yo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function rp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":so()}function ip(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new go(yo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=rp(t);throw new go(yo.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function op(t,e){if(e<=0)throw new go(yo.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var sp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new go(yo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new go(yo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,tp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),up=new Map,ap=function(){function t(t,e){this.w_="(lite)",this.E_=new sp({}),this.T_=!1,t instanceof To?(this.I_=t,this.m_=new So):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new go(yo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new To(t.options.projectId)}(t),this.m_=new xo(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new go(yo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new go(yo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new sp(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new So;switch(t.type){case"gapi":var e=t.client;return uo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Oo(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new go(yo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return this,(t=up.get(this))&&(no("ComponentProvider","Removing Datastore"),up.delete(this),t.terminate()),Promise.resolve();var t},t}(),cp=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new fp(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),hp=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),fp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,qs(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Q(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new cp(this.firestore,null,new Uo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(hp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function lp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof bo&&(t=t._),Ql("collection","path",e),t instanceof ap)return np(n=Ro.ct.apply(Ro,ot([e],r))),new fp(t,null,n);if(!(t instanceof cp||t instanceof fp))throw new go(yo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return np(n=Ro.ct.apply(Ro,ot([t.path],r)).child(Ro.ct(e))),new fp(t.firestore,null,n)}function pp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof bo&&(t=t._),1===arguments.length&&(e=ho.t()),Ql("doc","path",e),t instanceof ap)return ep(n=Ro.ct.apply(Ro,ot([e],r))),new cp(t,null,new Uo(n));if(!(t instanceof cp||t instanceof fp))throw new go(yo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ep(n=t.D_.child(Ro.ct.apply(Ro,ot([e],r)))),new cp(t.firestore,t instanceof fp?t.v_:null,new Uo(n))}function dp(t,e){return t instanceof bo&&(t=t._),e instanceof bo&&(e=e._),(t instanceof cp||t instanceof fp)&&(e instanceof cp||e instanceof fp)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function vp(t,e){return t instanceof bo&&(t=t._),e instanceof bo&&(e=e._),t instanceof hp&&e instanceof hp&&t.firestore===e.firestore&&Xs(t.C_,e.C_)&&t.v_===e.v_
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var yp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new go(yo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new go(yo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return fo(this.x_,t.x_)||fo(this.N_,t.N_)},t}(),gp=/^__.*__$/,mp=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.zt?new Du(t,this.data,this.zt,e,this.fieldTransforms):new xu(t,this.data,e,this.fieldTransforms)},t}(),bp=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Du(t,this.data,this.zt,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function wp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw so()}}var Ep=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return qp(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.zt.find((function(e){return t.st(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.st(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(wp(this.k_)&&gp.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Ip=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||Ef(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Ep({k_:t,methodName:e,j_:n,path:Vo.at(),B_:!1,W_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function _p(t){var e=t.p_(),n=Ef(t.I_);return new Ip(t.I_,!!e.ignoreUndefinedProperties,n)}function Tp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Vp("Data must be an object, but it was:",s,r);var u,a,c=Rp(r,s);if(o.merge)u=new zo(s.zt),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=Up(e,l[f],n);if(!s.contains(p))throw new go(yo.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");zp(h,p)||h.push(p)}u=new zo(h),a=s.fieldTransforms.filter((function(t){return u.It(t.field)}))}else u=null,a=s.fieldTransforms;return new mp(new ls(c),u,a)}var Np=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Yl);function Ap(t,e,n){return new Ep({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var Sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.prototype.z_=function(t){return new mu(t.path,new hu)},e.prototype.isEqual=function(t){return t instanceof e},e}(Yl),xp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Q(e,t),e.prototype.z_=function(t){var e=Ap(this,t,!0),n=this.H_.map((function(t){return Lp(t,e)})),r=new fu(n);return new mu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Yl),Dp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Q(e,t),e.prototype.z_=function(t){var e=Ap(this,t,!0),n=this.H_.map((function(t){return Lp(t,e)})),r=new pu(n);return new mu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Yl),Op=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Q(e,t),e.prototype.z_=function(t){var e=new vu(t.Kt,ou(t.Kt,this.J_));return new mu(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Yl);function kp(t,e,n,r){var i=t.G_(1,e,n);Vp("Data must be an object, but it was:",i,r);var o=[],s=new ps;Fo(r,(function(t,r){var u=Fp(e,t,n);r instanceof bo&&(r=r._);var a=i.U_(u);if(r instanceof Np)o.push(u);else{var c=Lp(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new zo(o);return new bp(s.yt(),u,i.fieldTransforms)}function Cp(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[Up(e,r,n)],a=[i];if(o.length%2!=0)throw new go(yo.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(Up(e,o[c])),a.push(o[c+1]);for(var h=[],f=new ps,l=u.length-1;l>=0;--l)if(!zp(h,u[l])){var p=u[l],d=a[l];d instanceof bo&&(d=d._);var v=s.U_(p);if(d instanceof Np)h.push(p);else{var y=Lp(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new zo(h);return new bp(f.yt(),g,s.fieldTransforms)}function Pp(t,e,n,r){return void 0===r&&(r=!1),Lp(n,t.G_(r?4:3,e))}function Lp(t,e){if(t instanceof bo&&(t=t._),Mp(t))return Vp("Unsupported field value:",e,t),Rp(t,e);if(t instanceof Yl)return function(t,e){if(!wp(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Lp(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof bo&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ou(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Co.fromDate(t);return{timestampValue:ga(e.Kt,n)}}if(t instanceof Co)return n=new Co(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ga(e.Kt,n)};if(t instanceof yp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof mo)return{bytesValue:ma(e.Kt,t.l)};if(t instanceof cp){n=e.T;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ea(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+rp(t))}(t,e)}function Rp(t,e){var n={};return qo(t)?e.path&&e.path.length>0&&e.zt.push(e.path):Fo(t,(function(t,r){var i=Lp(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Mp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Co||t instanceof yp||t instanceof mo||t instanceof cp||t instanceof Yl)}function Vp(t,e,n){if(!Mp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=rp(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function Up(t,e,n){if(e instanceof bo&&(e=e._),e instanceof Xl)return e.d_;if("string"==typeof e)return Fp(t,e);throw qp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var jp=new RegExp("[~\\*/\\[\\]]");function Fp(t,e,n){if(e.search(jp)>=0)throw qp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Xl.bind.apply(Xl,ot([void 0],e.split("."))))).d_}catch(r){throw qp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function qp(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new go(yo.INVALID_ARGUMENT,(u+=". ")+t+a)}function zp(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Hp=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return tt(this,void 0,void 0,(function(){var e,n=this;return et(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new go(yo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return tt(this,void 0,void 0,(function(){var n,r,i,o,s,u;return et(this,(function(a){switch(a.label){case 0:return n=ao(t),r=Sa(n.Kt)+"/documents",i={documents:e.map((function(t){return _a(n.Kt,t)}))},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){uo(!!e.found),e.found.name,e.found.updateTime;var n=Ta(t,e.found.name),r=wa(e.found.updateTime),i=new ls({mapValue:{fields:e.found.fields}});return new ys(n,r,i,{})}(t,e):"missing"in e?function(t,e){uo(!!e.missing),uo(!!e.readTime);var n=Ta(t,e.missing),r=wa(e.readTime);return new gs(n,r)}(t,e):so()}(n.Kt,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());uo(!!e),u.push(e)})),u)]}}))}))}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof gs||t instanceof ys?n.sf(t):so()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Mu(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return tt(this,void 0,void 0,(function(){var t,e=this;return et(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Uo.ft(n);e.mutations.push(new Vu(r,e.Gt(r)))})),[4,function(t,e){return tt(this,void 0,void 0,(function(){var n,r,i;return et(this,(function(o){switch(o.label){case 0:return n=ao(t),r=Sa(n.Kt)+"/documents",i={writes:e.map((function(t){return Oa(n.Kt,t)}))},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof ys)e=t.version;else{if(!(t instanceof gs))throw so();e=Po.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new go(yo.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?wu.updateTime(e):wu.Wt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Po.min()))throw new go(yo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wu.updateTime(e)}return wu.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Bp=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new If(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu((function(){return tt(t,void 0,void 0,(function(){var t,e,n=this;return et(this,(function(r){return t=new Hp(this.Dh),(e=this.uf(t))&&e.then((function(e){n.fs.ys((function(){return t.commit().then((function(){n.Ts.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Xo(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys((function(){return e.af(),Promise.resolve()}))):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ju(e)}return!1},t}(),Gp=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=No.UNAUTHENTICATED,this.clientId=ho.t(),this._f=function(){},this.N=new Ka,this.credentials.S((function(t){no("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()}))}return t.prototype.getConfiguration=function(){return tt(this,void 0,void 0,(function(){return et(this,(function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.fs.wf)throw new go(yo.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new Ka;return this.fs.Tf((function(){return tt(t,void 0,void 0,(function(){var t,n;return et(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ic(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kp(t,e){return tt(this,void 0,void 0,(function(){var n,r,i=this;return et(this,(function(o){switch(o.label){case 0:return t.fs.Af(),no("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Yl,t.ff((function(n){r.isEqual(n)||(r=n,t.fs.vo((function(){return tt(i,void 0,void 0,(function(){return et(this,(function(t){switch(t.label){case 0:return[4,Mh(e.Sh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Vo((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function $p(t,e){return tt(this,void 0,void 0,(function(){var n,r;return et(this,(function(i){switch(i.label){case 0:return t.fs.Af(),[4,Jp(t)];case 1:return n=i.sent(),no("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.fs.vo((function(){return function(t,e){return tt(this,void 0,void 0,(function(){var n,r;return et(this,(function(i){switch(i.label){case 0:return(n=ao(t)).fs.Af(),no("RemoteStore","RemoteStore received new credentials"),r=Vf(n),n.Fh.add(3),[4,Of(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Fh.delete(3),[4,Df(n)];case 3:return i.sent(),[2]}}))}))}(e.gl,n)}))})),t.If=e,[2]}}))}))}function Jp(t){return tt(this,void 0,void 0,(function(){return et(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(no("FirestoreClient","Using default OfflineComponentProvider"),[4,Kp(t,new Gl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Wp(t){return tt(this,void 0,void 0,(function(){return et(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(no("FirestoreClient","Using default OnlineComponentProvider"),[4,$p(t,new Jl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function Xp(t){return Jp(t).then((function(t){return t.persistence}))}function Yp(t){return Jp(t).then((function(t){return t.Sh}))}function Qp(t){return Wp(t).then((function(t){return t.gl}))}function Zp(t){return Wp(t).then((function(t){return t.fa}))}function td(t){return tt(this,void 0,void 0,(function(){var e,n;return et(this,(function(r){switch(r.label){case 0:return[4,Wp(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=dl.bind(null,e.fa),n.Jh=yl.bind(null,e.fa),n)]}}))}))}function ed(t,e,n){var r=this;void 0===n&&(n={});var i=new Ka;return t.fs.ys((function(){return tt(r,void 0,void 0,(function(){var r;return et(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Wl({next:function(o){e.ys((function(){return rl(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new go(yo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new go(yo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new ul(qs(n.path),o,{includeMetadataChanges:!0,sl:!0});return nl(t,s)},[4,td(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}function nd(t,e,n){var r=this;void 0===n&&(n={});var i=new Ka;return t.fs.ys((function(){return tt(r,void 0,void 0,(function(){var r;return et(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Wl({next:function(n){e.ys((function(){return rl(t,s)})),n.fromCache&&"server"===r.source?i.reject(new go(yo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new ul(n,o,{includeMetadataChanges:!0,sl:!0});return nl(t,s)},[4,td(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}var rd=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new If(this,"async_queue_retry"),this.vf=function(){var e=wf();e&&no("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=wf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=wf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.vo=function(t){var e=this;this.ys((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return tt(this,void 0,void 0,(function(){var t,e=this;return et(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!Qa(t=n.sent()))throw t;return no("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,ro("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.mr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=rc.Is(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&so()},t.prototype.Af=function(){},t.prototype.Nf=function(){return tt(this,void 0,void 0,(function(){var t;return et(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ws-e.ws}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),id=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new rd,r.w_="name"in e?e.name:"[DEFAULT]",r}return Q(e,t),e.prototype.b_=function(){return this.Lf||sd(this),this.Lf.terminate()},e}(ap);function od(t){return t.Lf||sd(t),t.Lf.df(),t.Lf}function sd(t){var e=t.p_(),n=function(t,e,n){return new _o(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new Gp(t.m_,t.Mf,n)}function ud(t,e,n){var r=this,i=new Ka;return t.fs.enqueue((function(){return tt(r,void 0,void 0,(function(){var r;return et(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Kp(t,n)];case 1:return o.sent(),[4,$p(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===yo.FAILED_PRECONDITION||t.code===yo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function ad(t){if(t.R_||t.P_)throw new go(yo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var cd=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),Zo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Go(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(Ko(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw so()}},t.prototype.jf=function(t,e){var n=this,r={};return Fo(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new yp(Go(t.latitude),Go(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=Jo(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(Wo(t));default:return null}},t.prototype.Bf=function(t){var e=Bo(t);return new Co(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=Ro.ct(t);uo(Ga(n));var r=new To(n.get(1),n.get(3)),i=new Uo(n.X(5));return r.isEqual(e)||ro("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),hd=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new cp(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new fd(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(ld("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),fd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(hd);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ld(t,e){return"string"==typeof e?Fp(t,e):e instanceof bo?e._.d_:e.d_}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pd(t){if(Hs(t)&&0===t.Nt.length)throw new go(yo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var dd=function(){};function vd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var yd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return Q(e,t),e.prototype.Yf=function(t){var e=_p(t.firestore),n=function(t,e,n,r,i,o,s){var u;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new go(yo.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){_d(s,o);for(var a=[],c=0,h=s;c<h.length;c++){var f=h[c];a.push(Id(r,t,f))}u={arrayValue:{values:a}}}else u=Id(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||_d(s,o),u=Pp(n,"where",s,"in"===o||"not-in"===o);var l=Ts.create(i,o,u);return function(t,e){if(e.xt()){var n=Gs(t);if(null!==n&&!n.isEqual(e.field))throw new go(yo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Bs(t);null!==r&&Td(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new go(yo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new go(yo.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new hp(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new js(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(dd),gd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return Q(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new go(yo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new go(yo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Rs(e,n);return function(t,e){if(null===Bs(t)){var n=Gs(t);null!==n&&Td(t,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new hp(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new js(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(dd),md=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return Q(e,t),e.prototype.Yf=function(t){return new hp(t.firestore,t.v_,Ws(t.C_,this.nd,this.sd))},e}(dd),bd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Q(e,t),e.prototype.Yf=function(t){var e=Ed(t,this.type,this.rd,this.od);return new hp(t.firestore,t.v_,function(t,e){return new js(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(dd),wd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Q(e,t),e.prototype.Yf=function(t){var e=Ed(t,this.type,this.rd,this.od);return new hp(t.firestore,t.v_,function(t,e){return new js(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(dd);function Ed(t,e,n,r){if(n[0]instanceof bo&&(n[0]=n[0]._),n[0]instanceof hd)return function(t,e,n,r,i){if(!r)throw new go(yo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=$s(t);s<u.length;s++){var a=u[s];if(a.field.ht())o.push(ss(e,r.key));else{var c=r.field(a.field);if($o(c))throw new go(yo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.ot();throw new go(yo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ps(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=_p(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new go(yo.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.ht()){if("string"!=typeof c)throw new go(yo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ks(t)&&-1!==c.indexOf("/"))throw new go(yo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Ro.ct(c));if(!Uo.Et(h))throw new go(yo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new Uo(h);u.push(ss(e,f))}else{var l=Pp(n,r,c);u.push(l)}}return new Ps(u,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Id(t,e,n){if(n instanceof bo&&(n=n._),"string"==typeof n){if(""===n)throw new go(yo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ks(e)&&-1!==n.indexOf("/"))throw new go(yo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ro.ct(n));if(!Uo.Et(r))throw new go(yo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ss(t,new Uo(r))}if(n instanceof cp)return ss(t,n.S_);throw new go(yo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+rp(n)+".")}function _d(t,e){if(!Array.isArray(t)||0===t.length)throw new go(yo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new go(yo.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Td(t,e,n){if(!n.isEqual(e))throw new go(yo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Nd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function Ad(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Sd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Q(e,t),e.prototype.Uf=function(t){return new mo(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new cp(this.firestore,null,e)},e}(cd),xd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Dd=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).zf=e,u.ad=e,u.metadata=o,u}return Q(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new Od(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(ld("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(hd),Od=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Dd),kd=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new xd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new Od(n.zf,n.Hf,r.key,r,new xd(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new go(yo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map((function(e){var r=new Od(t.zf,t.Hf,e.doc.key,e.doc,new xd(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.ud.De;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Od(t.zf,t.Hf,e.doc.key,e.doc,new xd(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Cd(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Cd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return so()}}function Pd(t,e){return t instanceof Dd&&e instanceof Dd?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof kd&&e instanceof kd&&t.zf===e.zf&&vp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ld=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Q(e,t),e.prototype.Uf=function(t){return new mo(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new cp(this.firestore,null,e)},e}(cd);function Rd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ip(t,cp);var o=ip(t.firestore,id),s=_p(o);return e instanceof bo&&(e=e._),Vd(o,[("string"==typeof e||e instanceof Xl?Cp(s,"updateDoc",t.S_,e,n,r):kp(s,"updateDoc",t.S_,e)).F_(t.S_,wu.exists(!0))])}function Md(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof bo&&(t=t._);var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||Nd(i[u])||(s=i[u],u++);var a,c,h,f={includeMetadataChanges:s.includeMetadataChanges};if(Nd(i[u])){var l=i[u];i[u]=null===(e=l.next)||void 0===e?void 0:e.bind(l),i[u+1]=null===(n=l.error)||void 0===n?void 0:n.bind(l),i[u+2]=null===(r=l.complete)||void 0===r?void 0:r.bind(l)}if(t instanceof cp)c=ip(t.firestore,id),h=qs(t.S_.path),a={next:function(e){i[u]&&i[u](Ud(c,t,e))},error:i[u+1],complete:i[u+2]};else{var p=ip(t,hp);c=ip(p.firestore,id),h=p.C_;var d=new Ld(c);a={next:function(t){i[u]&&i[u](new kd(c,d,p,t))},error:i[u+1],complete:i[u+2]},pd(t.C_)}return function(t,e,n,r){var i=this,o=new Wl(r),s=new ul(e,o,n);return t.fs.ys((function(){return tt(i,void 0,void 0,(function(){var e;return et(this,(function(n){switch(n.label){case 0:return e=nl,[4,td(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.r_(),t.fs.ys((function(){return tt(i,void 0,void 0,(function(){var e;return et(this,(function(n){switch(n.label){case 0:return e=rl,[4,td(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(od(c),h,f,a)}function Vd(t,e){return function(t,e){var n=this,r=new Ka;return t.fs.ys((function(){return tt(n,void 0,void 0,(function(){var n;return et(this,(function(i){switch(i.label){case 0:return n=gl,[4,Zp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(od(t),e)}function Ud(t,e,n){var r=n.docs.get(e.S_),i=new Ld(t);return new Dd(t,i,e.S_,r,new xd(n.hasPendingWrites,n.fromCache),e.v_)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var jd=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=_p(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=Fd(t,this.zf),i=Ad(r.v_,e,n),o=Tp(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,wu.Wt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=Fd(t,this.zf);return e instanceof bo&&(e=e._),o="string"==typeof e||e instanceof Xl?Cp(this.wd,"WriteBatch.update",s.S_,e,n,r):kp(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,wu.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=Fd(t,this.zf);return this.fd=this.fd.concat(new Mu(e.S_,wu.Wt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new go(yo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Fd(t,e){if(t instanceof bo&&(t=t._),t.firestore!==e)throw new go(yo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return Q(e,t),e.prototype.get=function(e){var n=this,r=Fd(e,this.zf),i=new Ld(this.zf);return t.prototype.get.call(this,e).then((function(t){return new Dd(n.zf,i,r.S_,t.Jf,new xd(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=_p(t)}return t.prototype.get=function(t){var e=this,n=Fd(t,this.zf),r=new Sd(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return so();var i=t[0];if(i instanceof gs)return new hd(e.zf,r,n.S_,null,n.v_);if(i instanceof ys)return new hd(e.zf,r,i.key,i,n.v_);throw so()}))},t.prototype.set=function(t,e,n){var r=Fd(t,this.zf),i=Ad(r.v_,e,n),o=Tp(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Fd(t,this.zf);return e instanceof bo&&(e=e._),o="string"==typeof e||e instanceof Xl?Cp(this.wd,"Transaction.update",s.S_,e,n,r):kp(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=Fd(t,this.zf);return this.Td.delete(e.S_),this},t}()),zd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){ad(t=ip(t,id));var n=od(t),r=t.p_(),i=new Jl;return ud(n,i,new Kl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){ad(t=ip(t,id));var e=od(t),n=t.p_(),r=new Jl;return ud(e,r,new $l(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new go(yo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ka;return t.Mf.Tf((function(){return tt(e,void 0,void 0,(function(){var e;return et(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return tt(this,void 0,void 0,(function(){var e;return et(this,(function(n){switch(n.label){case 0:return Wa.Wn()?(e=t+"main",[4,Wa.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Oh(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),Hd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof To||(i.md=e),i}return Q(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.V_().host&&io("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return tt(e,void 0,void 0,(function(){var e,n;return et(this,(function(r){switch(r.label){case 0:return[4,Xp(t)];case 1:return e=r.sent(),[4,Qp(t)];case 2:return n=r.sent(),[2,(e.po(!0),function(t){var e=ao(t);return e.Fh.delete(0),Df(e)}(n))]}}))}))}))}(od(ip(this._,id)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return tt(e,void 0,void 0,(function(){var e,n;return et(this,(function(r){switch(r.label){case 0:return[4,Xp(t)];case 1:return e=r.sent(),[4,Qp(t)];case 2:return n=r.sent(),[2,(e.po(!1),function(t){return tt(this,void 0,void 0,(function(){var e;return et(this,(function(n){switch(n.label){case 0:return(e=ao(t)).Fh.add(0),[4,Of(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(od(ip(this._,id)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&tp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Ka;return t.fs.ys((function(){return tt(e,void 0,void 0,(function(){var e;return et(this,(function(r){switch(r.label){case 0:return e=_l,[4,Zp(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(od(ip(this._,id)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Wl(e);return t.fs.ys((function(){return tt(n,void 0,void 0,(function(){var e;return et(this,(function(n){switch(n.label){case 0:return e=function(t,e){ao(t).jh.add(e),e.next()},[4,td(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.r_(),t.fs.ys((function(){return tt(n,void 0,void 0,(function(){var e;return et(this,(function(n){switch(n.label){case 0:return e=function(t,e){ao(t).jh.delete(e)},[4,td(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(od(t=ip(t,id)),Nd(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new go(yo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new nv(this,lp(this._,t))}catch(t){throw Jd(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new $d(this,pp(this._,t))}catch(t){throw Jd(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Zd(this,function(t,e){if(t=ip(t,ap),Ql("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new go(yo.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new hp(t,null,function(t){return new js(Ro.at(),t)}(e))}(this._,t))}catch(t){throw Jd(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Ka;return t.fs.ys((function(){return tt(n,void 0,void 0,(function(){var n;return et(this,(function(i){switch(i.label){case 0:return[4,function(t){return Wp(t).then((function(t){return t.Dh}))}(t)];case 1:return n=i.sent(),new Bp(t.fs,n,e,r).run(),[2]}}))}))})),r.promise}(od(t),(function(n){return e(new qd(t,n))}))}(this._,(function(n){return t(new Gd(e,n))}))},e.prototype.batch=function(){var t=this;return od(this._),new Kd(new jd(this._,(function(e){return Vd(t._,e)})))},e.prototype.loadBundle=function(t){throw new go(yo.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new go(yo.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(bo),Bd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Q(e,t),e.prototype.Uf=function(t){return new Io(new mo(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return $d.Ad(e,this.firestore,null)},e}(cd);var Gd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Q(e,t),e.prototype.get=function(t){var e=this,n=rv(t);return this._.get(n).then((function(t){return new Yd(e.zf,t)}))},e.prototype.set=function(t,e,n){var r=rv(t);return n?(Zl("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=rv(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,ot([s,e,n],i)),this},e.prototype.delete=function(t){var e=rv(t);return this._.delete(e),this},e}(bo),Kd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.prototype.set=function(t,e,n){var r=rv(t);return n?(Zl("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=rv(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,ot([s,e,n],i)),this},e.prototype.delete=function(t){var e=rv(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(bo),$d=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new Bd(e),r}return Q(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new go(yo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new cp(n._,r,new Uo(t)))},e.Ad=function(t,n,r){return new e(n,new cp(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new nv(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new nv(this.firestore,lp(this._,t))}catch(t){throw Jd(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof bo&&(t=t._),t instanceof cp&&dp(this._,t)},e.prototype.set=function(t,e){e=Zl("DocumentReference.set",e);try{return function(t,e,n){t=ip(t,cp);var r=ip(t.firestore,id),i=Ad(t.v_,e,n);return Vd(r,[Tp(_p(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,wu.Wt())])}(this._,t,e)}catch(t){throw Jd(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Rd(this._,t):Rd.apply(void 0,ot([this._,t,e],n))}catch(t){throw Jd(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Vd(ip((t=this._).firestore,id),[new Mu(t.S_,wu.Wt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Wd(e),i=Xd(e,(function(e){return new Yd(t.firestore,new Dd(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return Md(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ip(t,cp);var e=ip(t.firestore,id),n=od(e),r=new Ld(e);return function(t,e){var n=this,r=new Ka;return t.fs.ys((function(){return tt(n,void 0,void 0,(function(){var n;return et(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return tt(this,void 0,void 0,(function(){var r,i;return et(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ao(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ic.Jo(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof ys?n.resolve(i):i instanceof gs?n.resolve(null):n.reject(new go(yo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ic(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Yp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Dd(e,r,t.S_,n,new xd(n instanceof ys&&n.bt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=ip(t,cp);var e=ip(t.firestore,id);return ed(od(e),t.S_,{source:"server"}).then((function(n){return Ud(e,t,n)}))}(this._):function(t){t=ip(t,cp);var e=ip(t.firestore,id);return ed(od(e),t.S_).then((function(n){return Ud(e,t,n)}))}(this._)).then((function(t){return new Yd(e.firestore,new Dd(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(bo);function Jd(t,e,n){return t.message=t.message.replace(e,n),t}function Wd(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Nd(r))return r}return{}}function Xd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Nd(t[0])?t[0]:Nd(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Yd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Q(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new $d(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return Pd(this._,t._)},e}(bo),Qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.prototype.data=function(t){return this._.data(t)},e}(Yd),Zd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new Bd(e),r}return Q(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,vd(this._,function(t,e,n){var r=e,i=ld("where",t);return new yd(i,r,n)}(t,n,r)))}catch(t){throw Jd(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,vd(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=ld("orderBy",t);return new gd(r,n)}(t,n)))}catch(t){throw Jd(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,vd(this._,function(t){return op("limit",t),new md("limit",t,"F")}(t)))}catch(t){throw Jd(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,vd(this._,function(t){return op("limitToLast",t),new md("limitToLast",t,"L")}(t)))}catch(t){throw Jd(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,vd(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bd("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw Jd(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,vd(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bd("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw Jd(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,vd(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wd("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw Jd(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,vd(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wd("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw Jd(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return vp(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ip(t,hp);var e=ip(t.firestore,id),n=od(e),r=new Ld(e);return function(t,e){var n=this,r=new Ka;return t.fs.ys((function(){return tt(n,void 0,void 0,(function(){var n;return et(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return tt(this,void 0,void 0,(function(){var r,i,o,s,u;return et(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Hh(t,e,!0)];case 1:return u=a.sent(),r=new hl(e,u.Pc),i=r.dl(u.documents),o=r.Ti(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=ic(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,Yp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new kd(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=ip(t,hp);var e=ip(t.firestore,id),n=od(e),r=new Ld(e);return nd(n,t.C_,{source:"server"}).then((function(n){return new kd(e,r,t,n)}))}(this._):function(t){t=ip(t,hp);var e=ip(t.firestore,id),n=od(e),r=new Ld(e);return pd(t.C_),nd(n,t.C_).then((function(n){return new kd(e,r,t,n)}))}(this._)).then((function(t){return new ev(e.firestore,new kd(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Wd(e),i=Xd(e,(function(e){return new ev(t.firestore,new kd(t.firestore._,t.Hf,t._,e.ud))}));return Md(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(bo),tv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Q(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Qd(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(bo),ev=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Q(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Zd(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new Qd(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new tv(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new Qd(n.zf,r))}))},e.prototype.isEqual=function(t){return Pd(this._,t._)},e}(bo),nv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return Q(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new $d(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new $d(this.firestore,void 0===t?pp(this._):pp(this._,t))}catch(t){throw Jd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=ip(t.firestore,id),r=pp(t),i=Ad(t.v_,e);return Vd(n,[Tp(_p(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,wu.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new $d(e.firestore,t)}))},e.prototype.isEqual=function(t){return dp(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Zd);function rv(t){return t instanceof bo&&(t=t._),ip(t,cp)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var iv,ov=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Xl.bind.apply(Xl,ot([void 0],e))))||this}return Q(e,t),e.documentId=function(){return new e(Vo.lt().ot())},e.prototype.isEqual=function(t){return t instanceof bo&&(t=t._),t instanceof Xl&&this._.d_.isEqual(t.d_)},e}(bo),sv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.serverTimestamp=function(){var t=new Sp("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Np("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xp("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Dp("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Op("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(bo),uv={Firestore:Hd,GeoPoint:yp,Timestamp:Co,Blob:Io,Transaction:Gd,WriteBatch:Kd,DocumentReference:$d,DocumentSnapshot:Yd,Query:Zd,QueryDocumentSnapshot:Qd,QuerySnapshot:ev,CollectionReference:nv,FieldPath:ov,FieldValue:sv,setLogLevel:function(t){var e;e=t,to.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new mt("firestore",(function(t){return function(t,e){return new Hd(t,new id(t,e),new zd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},uv)))})(iv=Kt),iv.registerVersion("@firebase/firestore","2.1.1");var av=[{name:"Peanut Butter and Jelly",ingredients:"jelly",description:"The classic, no explanation needed, right?"},{name:"Fluffernutter",ingredients:"fluff",description:"The sweet treat featuring the Somerville, MA darling, fluff."},{name:"Peanut Butter and Mayo",ingredients:"mayo",description:"An old southern variation stemming from the Great Depression."},{name:"The Elvis",ingredients:"banana, bacon",description:"Allegedly one of the King's many cravings, according to his mom."}];function cv(e){let n,r,i,o,s,a,f,l,p,d,y,m,b,w,E,I,_,T,N,A,S,x,D;return{c(){n=h("meta"),r=h("meta"),i=h("meta"),o=h("meta"),s=h("meta"),a=h("meta"),f=h("meta"),l=h("meta"),p=h("meta"),d=h("meta"),y=h("meta"),m=h("meta"),b=h("meta"),w=h("meta"),E=h("meta"),I=h("meta"),_=h("meta"),T=h("meta"),N=h("meta"),A=h("meta"),S=h("meta"),x=h("meta"),D=h("link"),this.h()},l(t){const e=function(t,e=document.body){return Array.from(e.querySelectorAll(t))}('[data-svelte="svelte-1q253a5"]',document.head);n=g(e,"META",{charset:!0}),r=g(e,"META",{name:!0,content:!0}),i=g(e,"META",{"http-equiv":!0,content:!0}),o=g(e,"META",{name:!0,content:!0}),s=g(e,"META",{name:!0,content:!0}),a=g(e,"META",{property:!0,content:!0}),f=g(e,"META",{property:!0,content:!0}),l=g(e,"META",{property:!0,content:!0}),p=g(e,"META",{property:!0,content:!0}),d=g(e,"META",{property:!0,content:!0}),y=g(e,"META",{property:!0,content:!0}),m=g(e,"META",{property:!0,content:!0}),b=g(e,"META",{property:!0,content:!0}),w=g(e,"META",{property:!0,content:!0}),E=g(e,"META",{property:!0,content:!0}),I=g(e,"META",{name:!0,content:!0}),_=g(e,"META",{name:!0,content:!0}),T=g(e,"META",{name:!0,content:!0}),N=g(e,"META",{name:!0,content:!0}),A=g(e,"META",{name:!0,content:!0}),S=g(e,"META",{name:!0,content:!0}),x=g(e,"META",{name:!0,content:!0}),D=g(e,"LINK",{rel:!0,href:!0}),e.forEach(c),this.h()},h(){document.title="Svelte Starter",v(n,"charset","UTF-8"),v(r,"name","viewport"),v(r,"content","width=device-width, initial-scale=1.0"),v(i,"http-equiv","X-UA-Compatible"),v(i,"content","ie=edge"),v(o,"name","description"),v(o,"content",""),v(s,"name","news_keywords"),v(s,"content",""),v(a,"property","og:title"),v(a,"content",""),v(f,"property","og:site_name"),v(f,"content",""),v(l,"property","og:url"),v(l,"content",""),v(p,"property","og:description"),v(p,"content","description"),v(d,"property","og:type"),v(d,"content","article"),v(y,"property","og:locale"),v(y,"content","en_US"),v(m,"property","og:image"),v(m,"content",""),v(b,"property","og:image:type"),v(b,"content","image/jpeg"),v(w,"property","og:image:width"),v(w,"content","1200"),v(E,"property","og:image:height"),v(E,"content","600"),v(I,"name","twitter:card"),v(I,"content","summary_large_image"),v(_,"name","twitter:site"),v(_,"content",""),v(T,"name","twitter:creator"),v(T,"content",""),v(N,"name","twitter:title"),v(N,"content",""),v(A,"name","twitter:description"),v(A,"content",""),v(S,"name","twitter:image:src"),v(S,"content",""),v(x,"name","robots"),v(x,"content","max-image-preview:large"),v(D,"rel","canonical"),v(D,"href","")},m(t,e){u(document.head,n),u(document.head,r),u(document.head,i),u(document.head,o),u(document.head,s),u(document.head,a),u(document.head,f),u(document.head,l),u(document.head,p),u(document.head,d),u(document.head,y),u(document.head,m),u(document.head,b),u(document.head,w),u(document.head,E),u(document.head,I),u(document.head,_),u(document.head,T),u(document.head,N),u(document.head,A),u(document.head,S),u(document.head,x),u(document.head,D)},p:t,i:t,o:t,d(t){c(n),c(r),c(i),c(o),c(s),c(a),c(f),c(l),c(p),c(d),c(y),c(m),c(b),c(w),c(E),c(I),c(_),c(T),c(N),c(A),c(S),c(x),c(D)}}}class hv extends X{constructor(t){super(),W(this,t,null,cv,s,{})}}function fv(e){let n,r;return{c(){n=h("img"),this.h()},l(t){n=g(t,"IMG",{style:!0,src:!0,alt:!0,class:!0}),this.h()},h(){var t,i,o,s;t=n,i="transform",o="rotate("+e[3]+"deg)",t.style.setProperty(i,o,s?"important":""),n.src!==(r="assets/ingredients/"+e[2]+".png")&&v(n,"src",r),v(n,"alt",e[0]),v(n,"class","svelte-tc3ht"),E(n,"alt",e[1])},m(t,e){a(t,n,e)},p(t,[e]){1&e&&v(n,"alt",t[0]),2&e&&E(n,"alt",t[1])},i:t,o:t,d(t){t&&c(n)}}}function lv(t,e,n){let{name:r}=e,{alt:i}=e;const o=r.toLowerCase().replace(/[^a-z]/g,""),s=20*Math.random()-10;return t.$$set=t=>{"name"in t&&n(0,r=t.name),"alt"in t&&n(1,i=t.alt)},[r,i,o,s]}class pv extends X{constructor(t){super(),W(this,t,lv,fv,s,{name:0,alt:1})}}function dv(t,e,n){const r=t.slice();return r[4]=e[n],r[14]=n,r}function vv(t){let e,n,r,i;n=new pv({props:{alt:t[5],name:t[4]}});let o=t[14]<t[6].length-1&&function(t){let e,n;return{c(){e=h("span"),n=f("+")},l(t){e=g(t,"SPAN",{});var r=y(e);n=m(r,"+"),r.forEach(c)},m(t,r){a(t,e,r),u(e,n)},d(t){t&&c(e)}}}();return{c(){e=h("li"),B(n.$$.fragment),o&&o.c(),r=l(),this.h()},l(t){e=g(t,"LI",{class:!0});var i=y(e);G(n.$$.fragment,i),o&&o.l(i),r=b(i),i.forEach(c),this.h()},h(){v(e,"class","svelte-1xekbt8")},m(t,s){a(t,e,s),K(n,e,null),o&&o.m(e,null),u(e,r),i=!0},p(t,e){const r={};32&e&&(r.alt=t[5]),n.$set(r)},i(t){i||(q(n.$$.fragment,t),i=!0)},o(t){z(n.$$.fragment,t),i=!1},d(t){t&&c(e),$(n),o&&o.d()}}}function yv(t){let e,n,r,o,s,p,I,_,T,N,A,S,x,D,O,k,C,P,L,R,M,V,U=t[6],H=[];for(let e=0;e<U.length;e+=1)H[e]=vv(dv(t,U,e));const B=t=>z(H[t],1,1,()=>{H[t]=null});return{c(){e=h("div"),n=h("div"),r=h("p"),o=h("strong"),s=f(t[4]),p=l(),I=h("p"),_=h("button"),T=f(t[2]),N=f(" "),A=l(),S=h("button"),x=f(" "),D=f(t[3]),O=l(),k=h("ul");for(let t=0;t<H.length;t+=1)H[t].c();C=l(),P=h("p"),L=f(t[1]),this.h()},l(i){e=g(i,"DIV",{class:!0,id:!0,"data-id":!0});var u=y(e);n=g(u,"DIV",{class:!0});var a=y(n);r=g(a,"P",{class:!0});var h=y(r);o=g(h,"STRONG",{});var f=y(o);s=m(f,t[4]),f.forEach(c),h.forEach(c),p=b(a),I=g(a,"P",{class:!0});var l=y(I);_=g(l,"BUTTON",{class:!0});var d=y(_);T=m(d,t[2]),N=m(d," "),d.forEach(c),A=b(l),S=g(l,"BUTTON",{class:!0});var v=y(S);x=m(v," "),D=m(v,t[3]),v.forEach(c),l.forEach(c),a.forEach(c),O=b(u),k=g(u,"UL",{class:!0});var w=y(k);for(let t=0;t<H.length;t+=1)H[t].l(w);w.forEach(c),C=b(u),P=g(u,"P",{class:!0});var E=y(P);L=m(E,t[1]),E.forEach(c),u.forEach(c),this.h()},h(){v(r,"class","svelte-1xekbt8"),v(_,"class","svelte-1xekbt8"),v(S,"class","svelte-1xekbt8"),v(I,"class","rate svelte-1xekbt8"),v(n,"class","name svelte-1xekbt8"),v(k,"class","ingredients svelte-1xekbt8"),v(P,"class","description svelte-1xekbt8"),v(e,"class","sandwich svelte-1xekbt8"),v(e,"id",t[0]),v(e,"data-id",t[0]),E(e,"alt",t[5])},m(i,c){a(i,e,c),u(e,n),u(n,r),u(r,o),u(o,s),u(n,p),u(n,I),u(I,_),u(_,T),u(_,N),u(I,A),u(I,S),u(S,x),u(S,D),u(e,O),u(e,k);for(let t=0;t<H.length;t+=1)H[t].m(k,null);u(e,C),u(e,P),u(P,L),R=!0,M||(V=[d(_,"click",t[10]),d(S,"click",t[11])],M=!0)},p(t,[n]){if((!R||16&n)&&w(s,t[4]),(!R||4&n)&&w(T,t[2]),(!R||8&n)&&w(D,t[3]),96&n){let e;for(U=t[6],e=0;e<U.length;e+=1){const r=dv(t,U,e);H[e]?(H[e].p(r,n),q(H[e],1)):(H[e]=vv(r),H[e].c(),q(H[e],1),H[e].m(k,null))}for(j(),e=U.length;e<H.length;e+=1)B(e);F()}(!R||2&n)&&w(L,t[1]),(!R||1&n)&&v(e,"id",t[0]),(!R||1&n)&&v(e,"data-id",t[0]),32&n&&E(e,"alt",t[5])},i(t){if(!R){for(let t=0;t<U.length;t+=1)q(H[t]);R=!0}},o(t){H=H.filter(Boolean);for(let t=0;t<H.length;t+=1)z(H[t]);R=!1},d(t){t&&c(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(H,t),M=!1,i(V)}}}function gv(t,e,n){let{id:r}=e,{index:i}=e,{name:o}=e,{ingredients:s}=e,{description:u}=e,{love:a}=e,{hate:c}=e;const h=["peanut butter"].concat(s.split(",").map(t=>t.trim()).filter(t=>t)),f=N(),l=(t,e)=>{f("rate",{value:t,id:e})};let p;return t.$$set=t=>{"id"in t&&n(0,r=t.id),"index"in t&&n(8,i=t.index),"name"in t&&n(4,o=t.name),"ingredients"in t&&n(9,s=t.ingredients),"description"in t&&n(1,u=t.description),"love"in t&&n(2,a=t.love),"hate"in t&&n(3,c=t.hate)},t.$$.update=()=>{256&t.$$.dirty&&n(5,p=i%2==0)},[r,u,a,c,o,p,h,l,i,s,()=>l("love",r),()=>l("hate",r)]}class mv extends X{constructor(t){super(),W(this,t,gv,yv,s,{id:0,index:8,name:4,ingredients:9,description:1,love:2,hate:3})}}function bv(t,e,n){const r=t.slice();return r[12]=e[n],r}function wv(t,n){let r,i,o;const s=[n[12]];let u={};for(let t=0;t<s.length;t+=1)u=e(u,s[t]);return i=new mv({props:u}),i.$on("rate",n[1]),{key:t,first:null,c(){r=p(),B(i.$$.fragment),this.h()},l(t){r=p(),G(i.$$.fragment,t),this.h()},h(){this.first=r},m(t,e){a(t,r,e),K(i,t,e),o=!0},p(t,e){const n=1&e?function(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const s=t[o],u=e[o];if(u){for(const t in s)t in u||(r[t]=1);for(const t in u)i[t]||(n[t]=u[t],i[t]=1);t[o]=u}else for(const t in s)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(s,[(r=t[12],"object"==typeof r&&null!==r?r:{})]):{};var r;i.$set(n)},i(t){o||(q(i.$$.fragment,t),o=!0)},o(t){z(i.$$.fragment,t),o=!1},d(t){t&&c(r),$(i,t)}}}function Ev(t){let e,n,r,i,o,s,p,d,w,E,I,_,T,N,A=[],S=new Map;e=new hv({});let x=t[0];const D=t=>t[12].id;for(let e=0;e<x.length;e+=1){let n=bv(t,x,e),r=D(n);S.set(r,A[e]=wv(r,n))}return{c(){B(e.$$.fragment),n=l(),r=h("section"),i=h("h1"),o=f("The Complete Guide to Peanut Butter Sandwiches"),s=l(),p=h("p"),d=f("Expand your palette  and mind  with this exhaustive list of\n    peanut butter sandwich alternatives. Make. Eat. Rate."),w=l(),E=h("section");for(let t=0;t<A.length;t+=1)A[t].c();I=l(),_=h("p"),T=f("*This website contains peanuts"),this.h()},l(t){G(e.$$.fragment,t),n=b(t),r=g(t,"SECTION",{class:!0});var u=y(r);i=g(u,"H1",{class:!0});var a=y(i);o=m(a,"The Complete Guide to Peanut Butter Sandwiches"),a.forEach(c),s=b(u),p=g(u,"P",{});var h=y(p);d=m(h,"Expand your palette  and mind  with this exhaustive list of\n    peanut butter sandwich alternatives. Make. Eat. Rate."),h.forEach(c),u.forEach(c),w=b(t),E=g(t,"SECTION",{class:!0});var f=y(E);for(let t=0;t<A.length;t+=1)A[t].l(f);f.forEach(c),I=b(t),_=g(t,"P",{});var l=y(_);T=m(l,"*This website contains peanuts"),l.forEach(c),this.h()},h(){v(i,"class","svelte-w67qdf"),v(r,"class","svelte-w67qdf"),v(E,"class","svelte-w67qdf")},m(t,c){K(e,t,c),a(t,n,c),a(t,r,c),u(r,i),u(i,o),u(r,s),u(r,p),u(p,d),a(t,w,c),a(t,E,c);for(let t=0;t<A.length;t+=1)A[t].m(E,null);a(t,I,c),a(t,_,c),u(_,T),N=!0},p(t,[e]){if(3&e){const n=t[0];j(),A=function(t,e,n,r,i,o,s,u,a,c,h,f){let l=t.length,p=o.length,d=l;const v={};for(;d--;)v[t[d].key]=d;const y=[],g=new Map,m=new Map;for(d=p;d--;){const t=f(i,o,d),u=n(t);let a=s.get(u);a?r&&a.p(t,e):(a=c(u,t),a.c()),g.set(u,y[d]=a),u in v&&m.set(u,Math.abs(d-v[u]))}const b=new Set,w=new Set;function E(t){q(t,1),t.m(u,h),s.set(t.key,t),h=t.first,p--}for(;l&&p;){const e=y[p-1],n=t[l-1],r=e.key,i=n.key;e===n?(h=e.first,l--,p--):g.has(i)?!s.has(r)||b.has(r)?E(e):w.has(i)?l--:m.get(r)>m.get(i)?(w.add(r),E(e)):(b.add(i),l--):(a(n,s),l--)}for(;l--;){const e=t[l];g.has(e.key)||a(e,s)}for(;p;)E(y[p-1]);return y}(A,e,D,1,t,n,S,E,H,wv,null,bv),F()}},i(t){if(!N){q(e.$$.fragment,t);for(let t=0;t<x.length;t+=1)q(A[t]);N=!0}},o(t){z(e.$$.fragment,t);for(let t=0;t<A.length;t+=1)z(A[t]);N=!1},d(t){$(e,t),t&&c(n),t&&c(r),t&&c(w),t&&c(E);for(let t=0;t<A.length;t+=1)A[t].d();t&&c(I),t&&c(_)}}}function Iv(t,e,n){const r=av.map((t,e)=>({index:e,id:t.name.toLowerCase().replace(/[^a-z]/g,""),love:0,hate:0,...t})),i={apiKey:"AIzaSyD6phwPUJCBIAd8hBSldUoxrw-ez61Ck9Q",authDomain:"peanut-butter-41a94.firebaseapp.com",projectId:"peanut-butter-41a94"};let o,s,u={},a=r;const c=t=>u[t]||{};return function(t){T().$$.on_mount.push(t)}(()=>{Kt.apps.length||(o=Kt.initializeApp(i),s=Kt.firestore(o),(async()=>{try{await s.collection("ratings").onSnapshot(t=>{t.forEach(t=>{n(2,u[t.id]=t.data(),u)})}),n(2,u)}catch(t){console.log(t)}})())}),t.$$.update=()=>{4&t.$$.dirty&&n(0,a=r.map(t=>({...t,...c(t.id)})))},[a,({detail:t})=>{const{value:e,id:n}=t;s.collection("ratings").doc(n).update({[[e]]:Kt.firestore.FieldValue.increment(1)})},u]}const _v=new class extends X{constructor(t){super(),W(this,t,Iv,Ev,s,{})}}({target:document.querySelector("main"),hydrate:!0});return _v}();
//# sourceMappingURL=bundle.js.map
